<?xml version="1.0" encoding="UTF-8" ?>
<!-- This is a WordPress eXtended RSS file generated by WordPress as an export of your site. -->
<!-- It contains information about your site's posts, pages, comments, categories, and other content. -->
<!-- You may use this file to transfer that content from one site to another. -->
<!-- This file is not intended to serve as a complete backup of your site. -->

<!-- To import this information into a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Go to Tools: Import in the WordPress admin panel. -->
<!-- 3. Install the "WordPress" importer from the list. -->
<!-- 4. Activate & Run Importer. -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. You will first be asked to map the authors in this export file to users -->
<!--    on the site. For each author, you may choose to map to an -->
<!--    existing user on the site or to create a new user. -->
<!-- 7. WordPress will then import each of the posts, pages, comments, categories, etc. -->
<!--    contained in this file into your site. -->

	
<rss version="2.0"
	xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:wp="http://wordpress.org/export/1.2/"
>

<channel>
	<title>Awesome Enterprise Documentation</title>
	<link>https://awxdocs.com</link>
	<description></description>
	<pubDate>Tue, 02 Feb 2021 11:31:42 +0000</pubDate>
	<language>en-US</language>
	<wp:wxr_version>1.2</wp:wxr_version>
	<wp:base_site_url>https://awxdocs.com</wp:base_site_url>
	<wp:base_blog_url>https://awxdocs.com</wp:base_blog_url>

		<wp:author><wp:author_id>3</wp:author_id><wp:author_login><![CDATA[gopi]]></wp:author_login><wp:author_email><![CDATA[gopi@amiworks.com]]></wp:author_email><wp:author_display_name><![CDATA[Gopi Toraskar]]></wp:author_display_name><wp:author_first_name><![CDATA[Gopi]]></wp:author_first_name><wp:author_last_name><![CDATA[Toraskar]]></wp:author_last_name></wp:author>

				
		<item>
		<title>bar-graph</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673947</link>
		<pubDate>Sat, 17 Nov 2018 05:01:24 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670689</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [module.set query="{search.query}" /]
  
  [db2.meta_query query="{module.query}" set="module.dataset" /]
  
  [aw2.get module.dataset.rows.json_encode set="module.results" /]
  [aw2.get token set="module.token"]
  
  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
  	<script type="spa/axn" axn=core.run_script 
  					js_files='https://code.highcharts.com/highcharts.js,https://code.highcharts.com/highcharts-more.js,https://code.highcharts.com/highcharts-3d.js,https://code.highcharts.com/modules/solid-gauge.js' data-safe_id='[app.safe_id /]'>
    </script>
    <div id="[aw2.get module.token /]">
    </div>
    
    <script type=spa/axn axn=core.run_script cdn_js_files='highcharts-api/highcharts-api.js' data-safe_id='[app.safe_id /]'>
      var obj={"results":[aw2.get module.results /],
      "graph_type":"bar","header":{"x":""}};
      spa.highcharts_api.column(obj,$('#[aw2.get module.token /]'))
      
    </script>
  </template>
  [/html.trusted]
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673947</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:01:24]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:01:24]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[bar-graph]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>csv</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673948</link>
		<pubDate>Sat, 17 Nov 2018 05:02:47 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670691</guid>
		<description></description>
		<content:encoded><![CDATA[[debug.ignore]
generate header === done
remove count if >1 === done
sort out the security issue
[/debug.ignore]
[templates.add main]
  [module.set table="{search.table}" /]
  [module.set query="{search.query}" /]
    
  [module.set column="{module.table.column}" /]
  [module.set query.pageno={form_data.pageno} default=1 /] 
    
  [module.set query.query_count='no'/]  
  
  [if.equal lhs="{form_data.pageno}" rhs=1]
	  [module.set query.query_count='yes'/]
      [session_ticket.set {app.active.ticket} field='csv_found_pages' value='' /]
      [session_ticket.set {app.active.ticket} field='csv_ticket' value='' /]
  [/if.equal]

  
  [module.set query.pagesize={module.handler.pagesize}  not_empty='{module.handler.pagesize}' /]
  

  [db2.meta_query2 query="{module.query}" set="module.dataset" /]

  [session_ticket.get {app.active.ticket} field='csv_found_pages' set=module.csv_found_pages /]
  [if.empty module.csv_found_pages]
    [module.set csv_found_pages={module.dataset.found_pages} /]
    [session_ticket.set {app.active.ticket} field='csv_found_pages' value='{module.csv_found_pages}' /]
  	[aw2.set_array search found_pages='{module.dataset.found_pages}' found_rows='{module.dataset.found_rows}' /]
  [/if.empty]
  
  [module.set csv_array="" /]
  
  //**check if pageno=1 then loop through columns and create 1 row.**//
	[if.equal lhs='{form_data.pageno}' rhs='1']
		[loop.@column module.column]
			[aw2.get @column.item.label set=module.temp_col_array.new /]
		[/loop.@column]
		[module.set csv_array.new="{module.temp_col_array}" /]
	[/if.equal]
  
  [loop.@rows module.dataset.rows]
    [do.row]
      [loop.@i @rows.item]
        [aw2.get @i.item set=row.{@i.key} /]
      [/loop.@i]
      [module.set temp_col_array="" /]

      [loop.@columns module.column]
        [aw2.get @rows.item.{@columns.item.meta_key} set=module.temp_col_array.new not_empty='{@columns.item.meta_key}'/]
        [code.run @columns.item.calc set=module.temp_col_array.new not_empty='{@columns.item.calc}'/]
      [/loop.@columns]   

      [module.set csv_array.new="{module.temp_col_array}" /]
    [/do.row]
  [/loop.@rows]

  [session_ticket.get {app.active.ticket} field='csv_ticket' set=module.csv_ticket /]
  [if.empty module.csv_ticket]
    [module.set csv_ticket={token} /]
    [session_ticket.set {app.active.ticket} field='csv_ticket' value='{module.csv_ticket}' /]
  [/if.empty]
  [util.save_csv_page pageno="{form_data.pageno}" rows="{module.csv_array}" key="{module.csv_ticket}" /]
    
  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html'  data-safe_id='[app.safe_id /]'>
	  <section role=csv>
      	[if.greater_than_zero module.csv_found_pages]
		  <p>Written [aw2.get form_data.pageno default=1 /] of [module.csv_found_pages /] <button type="button" class="btn btn-warning js-cancel-csv">Cancel</button></p>
		[/if.greater_than_zero]
        [if.else]
        	<p>No records found</p>
        [/if.else]
      [if.equal lhs="{form_data.pageno}" rhs="{module.csv_found_pages}" c.positive="module.csv_found_pages"]
  			<script type="spa/axn"  data-safe_id='[app.safe_id /]' axn="core.run_script">
  				window.location.href='[app.path /]/csv_download/[module.csv_ticket/]?filename=[aw2.get search.handlers.csv.filename default="{token}.csv" /]';
    var snd = new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");  
for (i = 0; i < 6; i++) { 
	snd.play();
}
 </script>	
  		[/if.equal]
  		[if.else]
  		<script type="spa/axn" axn="core.run_script"  data-safe_id='[app.safe_id /]'>
              
          var pageno=[math.solve main='{form_data.pageno}+1'/] ;
          
          var article=o.el.parents('[role=search]');
      		var search_id=article.attr('id');
      		var form=o.el.parents('[role=search]').find('[role=form] form');
      
      		//var action=o.block.id;
      		//form.attr('submit_handler',action);
      		form.attr('pageno',pageno);
      		form.attr('search_id',search_id);
      		form.attr('new_query','no');
            form.submit();				
      					
      	</script>
  		[/if.else]
  	</section>
  </template>
  [/html.trusted]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673948</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:02:47]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:02:47]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[csv]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
			<item>
		<title>datatable</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673949</link>
		<pubDate>Sat, 17 Nov 2018 05:04:24 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670693</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [module.set table="{search.table}" /]
  [module.set query="{search.query}" /]
  
  [module.set column="{module.table.column}" /]
  [module.set query.pageno="{form_data.pageno}" default=1 /]
  [module.set query.query_count="yes" /]

  [module.set query.max_count="{module.handler.max_count}" c.not_empty=module.handler.max_count /]



  [db2.meta_query2 query="{module.query}" o.set="module.dataset" /]

//****
[if.empty cookie.testq2]
	[db2.meta_query query="{module.query}" o.set="module.dataset" /]
[/if.empty]
[if.else]
  [db2.meta_query2 query="{module.query}" o.set="module.dataset" /]
[/if.else]
***//
  
  [env.set search.rows={module.dataset.rows} /]
  
  [if.not_empty search.after_query_code]
  	[code.run search.after_query_code /]
  [/if.not_empty]

  [if.equal lhs="{form_data.bulk_action}" rhs="yes"]
    [modules.run {form_data.module} template='{form_data.template}' post_type="{form_data.post_type}" selected_data="{form_data.selected_data}" set="template.ack" /]
	
  [template.return content]
  	[template.ack /]
  [/template.return]
    //**show alert message
    [manage_service.alert msg="{template.ack.reason}" msg_type="{template.ack.status}" set="template.msg" /]

    <script type="spa/axn" axn="core.run_script" alert="[template.msg/]" data-safe_id='[app.safe_id /]'></script>
    **//
  [/if.equal]
  
  [aw2.set_array search found_pages='{module.dataset.found_pages}' found_rows='{module.dataset.found_rows}' /]
	
  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
    [if.not_empty module.query.debug_dataset]
    	[if.user_can "develop_for_awesomeui"]
        	[module.dataset.dump/]
        [/if.user_can]
    [/if.not_empty]

	<style>[role="pagination"] .btn{margin:5px 5px 5px 0px;}</style>
  	<section role=pagination>
  		<div><b>[module.get dataset.pageno default=1 /] of [module.get dataset.found_pages /] Pages</b>([module.get dataset.found_rows /] Rows)</div>
    		
    	[module.set found_pages="{module.dataset.found_pages}"/]
    	[module.set found_pages=20 cond="{module.dataset.found_pages}" greater_than="20"/]
    	
    	[if.not_equal lhs="{module.found_pages}" rhs="0" not_empty="{module.found_pages}"]
    	  
          [loop.@j start=1 stop="{module.found_pages}" step=1]
            [module.set active="btn-info"/]
            [module.set active="btn-primary" cond="{module.dataset.pageno}" equal="{ @j.index}"/]
            <button type=button class="btn [module.get active /]" role=specific-page data-pageno='[aw2.get @j.index/]' data-safe_id="[app.safe_id/]">[aw2.get @j.index/]</button>
          [/loop.@j]
    	[/if.not_equal]
    	
  	</section>
  	<section role=table>
    
    	[loop.@action search.handlers.datatable.bulk_action]
          <button type="button" class="btn btn-fifth [env.@action.item.class /]" role="bulk-action" data-module="[aw2.get @action.item.module /]" data-template="[aw2.get @action.item.template /]" data-post_type="[aw2.get @action.item.post_type /]" data-safe_id="[app.safe_id/]" data-sub_handler='[request2.submit_handler/]' data-pageno="[request2.pageno/]">[aw2.get @action.item.label default="Send Data" /]</button> 		
      [/loop.@action]
    	
    	[if.not_empty search.handlers.datatable.bulk_action]
        	<script type=spa/axn axn='core.run_script' data-safe_id='[app.safe_id /]'>
            	var form=$('[role=search]').find('[role=form] form');
                form.attr('bulk_action','no');
                
                $(".cb-all").click(function () {
                    $(".cb").prop('checked', $(this).prop('checked'));
                });

                $(".cb").change(function(){
                    if (!$(this).prop("checked")){
                        $(".cb-all").prop("checked",false);
                    }
                });
                
            </script>
			
            <script type=spa/axn axn='core.run_script' bind='click' bind_selector='[role=bulk-action]' data-safe_id='[app.safe_id /]'>
				
                var article=o.el.parents('[role=search]');
                var search_id=article.attr('id');
				var selected = new Array();
                var module = o.block.target.attr('data-module');
                var template = o.block.target.attr('data-template');
                var post_type = o.block.target.attr('data-post_type');
                var pageno= o.block.target.attr('data-pageno');
                $( "input[name='bulkaction[]']:checked" ).each(function() {
                	selected.push($(this).val());
                });
                
                var form=$('[role=search]').find('[role=form] form');
                
                form.attr('bulk_action','yes');
                form.attr('selected_data',selected.join(","));
                form.attr('module',module);
                form.attr('template',template);
              	form.attr('post_type',post_type);
                form.attr('pageno',pageno);
                form.attr('search_id',search_id);
                form.attr('new_query','no');
				
                form.submit();	

            </script>
        
          [/if.not_empty]
          
          <div class="table-responsive font-size-smallest">
            <table class="table datatable">
              <thead>

                  [loop.@column module.column]
                    <th>
                    	[if.true @column.first]
                          [if.not_empty search.handlers.datatable.bulk_action]
                            <input type="checkbox" class="cb-all" name="checkall" data-safe_id='[app.safe_id /]'/>
                          [/if.not_empty]
                        [/if.true]
                        [if.else]
                        	[aw2.get @column.item.label /]
                        [/if.else]  
                    	
                    </th>
                  [/loop.@column]
              </thead>
              [loop.@my_row module.dataset.rows]
                [do.row]
                      [loop.@i @my_row.item]
                        [aw2.get @i.item set=row.{@i.key} /]
                      [/loop.@i]
                  <tr>
                      
                  [loop.@my_column module.column]
                  	
                    <td>
                    	[if.true @my_column.first]
                          [if.not_empty search.handlers.datatable.bulk_action]
                            <input type="checkbox" class="cb" name="bulkaction[]" value="[aw2.get @my_row.item.{@my_column.item.meta_key} /]"  data-safe_id='[app.safe_id /]'/>
                          [/if.not_empty]
                        [/if.true]
                        [if.else]
                        	[aw2.get @my_row.item.{@my_column.item.meta_key} /]
                        [/if.else]  
                              [code.run @my_column.item.calc /]
                          </td>
                  [/loop.@my_column]   
                </tr>
                [/do.row]
              [/loop.@my_row]
          </table>
       </div>
  	</section> 
    
     <script type="spa/axn" axn="core.run_script" cdn_js_files="datatables/jquery.dataTables.min.js" cdn_css_files="datatables/jquery.dataTables.min.css,datatables/buttons.dataTables.min.css" data-safe_id='[app.safe_id /]'>
            $('.datatable').DataTable({
                                        "paging":false,
                                        "ordering": false,
                                        "info":false
                                     });
          </script>
          
          <script type=spa/axn axn='core.run_script' bind='click' bind_selector='[role=specific-page]' data-safe_id='[app.safe_id /]'>
    		var pageno=o.block.target.attr('data-pageno');
    
    		var article=o.el.parents('[role=search]');
    		var search_id=article.attr('id');
    		var form=o.el.parents('[role=search]').find('[role=form] form');
    
    		//var action=o.block.id;
    		//form.attr('submit_handler',action);
    		form.attr('pageno',pageno);
    		form.attr('search_id',search_id);
    		form.attr('new_query','no');
    		
    		form.submit();	
    					
    	</script>
  </template>
  [/html.trusted]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673949</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:04:24]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:04:24]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[datatable]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_lock]]></wp:meta_key>
		<wp:meta_value><![CDATA[1613622804:3]]></wp:meta_value>
		</wp:postmeta>
							</item>
					
					<item>
		<title>handler-scripts</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673950</link>
		<pubDate>Sat, 17 Nov 2018 05:05:17 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670697</guid>
		<description></description>
		<content:encoded><![CDATA[[module.set_array config]
  [datatable label='Table' /]
  [csv label='Download CSV' /]
  [otp label='Get OTP' /]
  [pie-chart label='Pie Chart' /]
  [line-graph label='Line Graph' /]
  [bar-graph label='Bar Graph' /]
  [report-csv label='Report CSV' /]
[/module.set_array]

[templates.add main]

  
  [loop.@i module.handlers]
    [module.get config.{@i.key}.label set="module.temp_label" /]
    [module.set temp_token={token}  /]
    <button type="button" class="btn btn-primary js-submit-job REF[module.temp_token /]" role="form_handler" id="[aw2.get @i.key /]" data-safe_id='[app.safe_id /]'>[aw2.get @i.item.label default="{module.temp_label}" /]</button>
  
    <script type="spa/axn" axn="core.run_script" bind="click" bind_selector=".REF[module.temp_token /]" data-safe_id="[app.safe_id/]">
    	var article=o.el.parents('[role=search]');
    	var search_id=article.attr('id');
    	var form=o.el.parents('[role=search]').find('[role=form] form');
        
    	var action=o.block.id;
    	form.attr('submit_handler',action);
    	form.attr('pageno',1);
    	form.attr('search_id',search_id);
    	form.attr('new_query','yes');
		form.attr('bulk_action','no');
    	form.submit();
    </script>
  [/loop.@i]
  
  [if.not_empty module.auto_handler]
    <script type="spa/axn" axn="core.run_script"  data-safe_id="[app.safe_id/]">
    	var article=$('[role=search]');
    	var search_id=article.attr('id');
    	var form=$('[role=search]').find('[role=form] form');
   
    	var action='[module.auto_handler /]';
    	form.attr('submit_handler',action);
    	form.attr('pageno',1);
    	form.attr('search_id',search_id);
    	form.attr('new_query','yes');
    	form.submit();
    </script>
  [/if.not_empty]
   [env.@workflow_btn/]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673950</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:05:17]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:05:17]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[handler-scripts]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>line-graph</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673951</link>
		<pubDate>Sat, 17 Nov 2018 05:06:11 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670699</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [module.set query="{search.query}" /]
  
  [db2.meta_query query="{module.query}" set="module.dataset" /]
  
  [aw2.get module.dataset.rows.json_encode set="module.results" /]
  [aw2.get token set="module.token"]
  
  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
  	<script type="spa/axn" axn=core.run_script 
  					js_files='https://code.highcharts.com/highcharts.js,https://code.highcharts.com/highcharts-more.js,https://code.highcharts.com/highcharts-3d.js,https://code.highcharts.com/modules/solid-gauge.js' data-safe_id='[app.safe_id /]'>
    </script>
    <div id="[aw2.get module.token /]">
    </div>
    
    <script type=spa/axn axn=core.run_script cdn_js_files='highcharts-api/highcharts-api.js' data-safe_id='[app.safe_id /]'>
      
      var obj={"results":[aw2.get module.results /],
      "graph_type":"line","header":{"x":""}};
      spa.highcharts_api.line(obj,$('#[aw2.get module.token /]'))
      
    </script>
  </template>
  [/html.trusted]
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673951</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:06:11]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:06:11]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[line-graph]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>pie-chart</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673952</link>
		<pubDate>Sat, 17 Nov 2018 05:31:25 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670701</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [module.set query="{search.query}" /]
  [db2.meta_query query="{module.query}" set="module.dataset" /]
  [module.get dataset.rows.json_encode set="module.results" /]
  
  [aw2.get token set="module.token"]
  
  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
	<script type="spa/axn" axn=core.run_script js_files='https://code.highcharts.com/highcharts.js,https://code.highcharts.com/highcharts-more.js,https://code.highcharts.com/highcharts-3d.js,https://code.highcharts.com/modules/solid-gauge.js' data-safe_id='[app.safe_id /]'>
  </script>
  <div id="[aw2.get module.token /]">
  </div>
    
  <script type=spa/axn axn=core.run_script cdn_js_files='highcharts-api/highcharts-api.js' data-safe_id='[app.safe_id /]'>
    var obj={"results":[aw2.get module.results /],
    "graph_type":"pie","header":{"x":""}};
    spa.highcharts_api.pie(obj,$('#[aw2.get module.token /]'))
  </script>

  </template>
  [/html.trusted]
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673952</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:31:25]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:31:25]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[pie-chart]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>search-submit</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673953</link>
		<pubDate>Sat, 17 Nov 2018 05:32:12 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670703</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

  [do.search]
  	[module.set args={module.json_args.json_decode} /]
    [module.args merge_with=search /]
    [module.args set=search.args /]
    [do.form_data]
      [util.form_data_array merge_with=form_data /]

      //** echo form_data **//  
      [if.not_empty search.query.debug_form_data]
        [env.echo form_data /]
      [/if.not_empty]
      
      //** Handle after submit to prevent earlier parsing**//  
      
      [arr.create merge_with=search]
      //** This do is an array do **//  
        [do]
      	  [env.get search.after_submit /]
    	 [/do]
      [/arr.create]
      
      //** echo search **//  
      [if.not_empty search.query.debug]
        [env.echo search /]
      [/if.not_empty]
        
      [env.get search.handlers.{form_data.submit_handler} set=template.handler /]
      
      [module.set temp_handler={template.handler.handler} /]
      [module.set temp_handler={form_data.submit_handler} c.empty=module.temp_handler /]
      
        
      [this_collection.run {module.temp_handler} handler="{template.handler}" /]
    [/do.form_data]
        
  [/do.search]
    
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673953</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:32:12]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:32:12]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[search-submit]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>custom</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673954</link>
		<pubDate>Sat, 17 Nov 2018 05:32:57 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670705</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
 
   [module.set table="{search.table}" /]
  [module.set query="{search.query}" /]
  
  [module.set column="{module.table.column}" /]
  [module.set query.pageno="{form_data.pageno}" default=1 /]
  [module.set query.query_count="yes" /]
[module.set query.only_query='yes'/]
  [module.set query.max_count="{module.handler.max_count}" c.not_empty=module.handler.max_count /]



  [db2.meta_query2 query="{module.query}" o.set="module.dataset" /]

  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>

	[modules.run {module.handler.module_slug} template="{module.handler.tpl}"/]
  </template>
  [/html.trusted]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673954</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:32:57]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:32:57]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[custom]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>new_ticket</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673955</link>
		<pubDate>Sat, 17 Nov 2018 05:33:17 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670707</guid>
		<description></description>
		<content:encoded><![CDATA[[session_ticket.create nonce=yes set=module.ticket/]

[module.set temp_collection.post_type='{module.collection.post_type}' /]

[session_ticket.set_activity {module.ticket} collection='{module.temp_collection}' module='search-submit' /]
[session_ticket.set {module.ticket} field='json_args' value='{module.args.json_encode}' /]

[module.return module.ticket /]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673955</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:33:17]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:33:17]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[new_ticket]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>activity_ticket</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673956</link>
		<pubDate>Sat, 17 Nov 2018 05:33:40 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670709</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [session_ticket.create set=module.ticket/]
  
  [module.set temp_collection.post_type='{module.collection.post_type}' /]

  [session_ticket.set_activity {module.ticket} app='{module.handler.app}' collection='{module.temp_collection}' module='activity-submit' /]
  [session_ticket.set {module.ticket} field='json_form_data' value='{form_data.json_encode}' /]
  [session_ticket.set {module.ticket} field='json_args' value='{search.args.json_encode}' /]
  [session_ticket.set {module.ticket} field='json_handler' value='{module.handler.json_encode}' /]

  [date.create now date_format='Y-m-d H:i:s' set=template.dt /]
   
  [html.trusted] 
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
	<b>[template.dt]:</b> Ticket Is:: <b>[module.ticket/]</b>
  </template>
  [/html.trusted]
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673956</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:33:40]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:33:40]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[activity_ticket]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>Meta</title>
		<link>https://awxdocs.com/?post_type=db_2&#038;p=674085</link>
		<pubDate>Tue, 13 Nov 2018 10:55:47 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=db_2&#038;p=667625</guid>
		<description></description>
		<content:encoded><![CDATA[//**
Update Meta data for one object_id
**// 

[templates.add update_object_meta]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]

  [template.set sql]
  	set @object_id=[esc.id template.object_id /];
	select ID from [esc.table template.meta_table /] where object_id=@object_id FOR UPDATE;
	[loop.@meta template.meta]
			set @cnt=0;
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type=[esc.id @meta.item.coll_type /];
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];			
			
			select @cnt:=count(1) from [esc.table template.meta_table /] where object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
	[template.return template.transaction /]
[/templates.add]  

 //**
Update Meta data for one object_id
  **// 

[templates.add update_object_meta_old]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]

  [template.set sql]
	[loop.@meta template.meta]
			set @cnt=0;
			set @object_id=[esc.id template.object_id /];
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type=[esc.id @meta.item.coll_type /];
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];			
			
			select @cnt:=count(1) from [esc.table template.meta_table /] where object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key
					FOR UPDATE
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]

  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
	[template.return template.transaction /]
[/templates.add]  



  //**
select object meta for one object_id
  **// 
[templates.add select_object_meta]

	//******return when object_id is empty******//
	[template.return template.object_id c.empty="template.object_id" /]

	[template.set query c.empty=template.meta_keys]
			set @object_id=[esc.id template.object_id /];
			set @coll_id=[esc.id template.coll_id /];
			select meta_key,meta_value from [esc.table template.meta_table /] 
            where 
            coll_id=@coll_id 
            and object_id=@object_id;
	[/template.set]

	[template.set query c.not_empty=template.meta_keys]	
		set @object_id=[esc.id template.object_id /];
		set @coll_id=[esc.id template.coll_id /];
		set @meta_keys=[esc.in template.meta_keys /];
			
		select meta_key,meta_value from [esc.table template.meta_table /] where coll_id=@coll_id and object_id=@object_id 
		and FIND_IN_SET(meta_key,@meta_keys);
	[/template.set]

	[mysqli.multi.fetch.meta_keys o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.multi.fetch.meta_keys]

	[template.return template.rs_arr/]
[/templates.add]





  //**
Insert One collection for One Object
  **//  
[templates.add insert_coll_meta]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]
 
   [env.get app.user.email set=template.email/]
 
  [template.set sql]
	[loop.@meta template.meta]
		INSERT INTO [esc.table template.meta_table /](object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
			VALUES ('[esc.unsafe template.object_id /]','[esc.unsafe template.coll_id /]','[esc.unsafe template.coll_type /]','[esc.unsafe @meta.item.meta_key /]','[esc.unsafe @meta.item.meta_value /]','[esc.unsafe template.email /]');
	[/loop.@meta]
  [/template.set]
  
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
  
[/templates.add]  





  //**
Update One collection for One Object
  **// 
[templates.add update_coll_meta]
 
  //******return when object_id is empty******//
  [template.return template.object_id c.empty="template.object_id" /]

  [env.get app.user.email set=template.email/]
  
  [template.set sql]
	[loop.@meta template.meta]
	  SELECT @cnt:=count(1) FROM [esc.table template.meta_table /] WHERE object_id='[esc.unsafe template.object_id /]' AND coll_id='[esc.unsafe template.coll_id /]' AND coll_type='[esc.unsafe template.coll_type /]' AND meta_key='[esc.unsafe @meta.item.meta_key /]';
	  
	  INSERT INTO [esc.table template.meta_table /]
		(object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
		
	  SELECT '[esc.unsafe template.object_id /]','[esc.unsafe template.coll_id /]','[esc.unsafe template.coll_type /]','[esc.unsafe @meta.item.meta_key /]','[esc.unsafe @meta.item.meta_value /]','[esc.unsafe template.email /]' FROM dual WHERE @cnt=0;
	  
	  UPDATE [esc.table template.meta_table /] 
	  SET meta_value='[esc.unsafe @meta.item.meta_value /]',updated_by='[esc.unsafe template.email /]',stamp=current_timestamp 
	  where object_id='[esc.unsafe template.object_id /]' and coll_id='[esc.unsafe template.coll_id /]' and coll_type='[esc.unsafe template.coll_type /]' and meta_key='[esc.unsafe @meta.item.meta_key /]' and @cnt=1;  
	[/loop.@meta]
  [/template.set]  

  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
  
[/templates.add]  





  //**
select collection meta for one collection
  **// 
[templates.add select_collection_meta]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]

  [template.set query empty='{template.meta_keys}']
	  SELECT * FROM [esc.table template.meta_table /] where coll_id='[esc.unsafe template.coll_id /]' and coll_type='[esc.unsafe template.coll_type /]' and object_id='[esc.unsafe template.object_id /]';
  [/template.set]
  
  [template.get meta_keys.comma set=template.meta_keys not_empty='{template.meta_keys}'/]
  
  [template.set query not_empty='{template.meta_keys}']	
	    SELECT * FROM [esc.table template.meta_table /] where coll_id='[esc.unsafe template.coll_id /]' and coll_type='[esc.unsafe template.coll_type /]' and object_id='[esc.unsafe template.object_id /]' and meta_key in ([esc.unsafe.quotes template.meta_keys /]);
	[/template.set]
   
	[debug.ignore]
		[query.get_results set=template.rs] [template.query/]	[/query.get_results]
	[/debug.ignore]	

	[mysqli.fetch.rows o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.fetch.rows]

	[template.return template.rs/]
[/templates.add]



  //**
select meta for one object_id
  **// 
[templates.add select_meta]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]

  [template.set query empty='{template.meta_keys}']
	  select * from [esc.table template.meta_table /] where object_id='[esc.unsafe template.object_id /]';
  [/template.set]
  
  [template.get meta_keys.comma set=template.meta_keys not_empty='{template.meta_keys}'/]
  
  [template.set query not_empty='{template.meta_keys}']	
	    select * from [esc.table template.meta_table /] where  object_id='[esc.unsafe template.object_id /]' and meta_key in ([esc.unsafe.quotes template.meta_keys /]);
	[/template.set]

    [debug.ignore]
		[query.get_results set=template.rs] [template.query/]	[/query.get_results]
	[/debug.ignore]	

	[mysqli.fetch.rows o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.fetch.rows]

[template.return template.rs/]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>674085</wp:post_id>
		<wp:post_date><![CDATA[2018-11-13 10:55:47]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-13 10:55:47]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[meta]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[db_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>Meta Query</title>
		<link>https://awxdocs.com/?post_type=db_2&#038;p=674086</link>
		<pubDate>Tue, 13 Nov 2018 10:57:00 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=db_2&#038;p=667627</guid>
		<description></description>
		<content:encoded><![CDATA[//** Vikas Build support for seek to make queries even faster **//

//** input module.query
output module.dataset
**//
[templates.add main]
	
    [aw2.get dataset_values pageno="{module.query.pageno}" pagesize="{module.query.pagesize}" offset="{module.query.offset}" set="module.dataset" /]

//** set Limit **//
    [module.set dataset.limit_string]
        LIMIT [module.dataset.pagesize /]
    [/module.set] 
//** set Offset **//

  [module.set dataset.offset_string]
        OFFSET [module.dataset.offset /]
  [/module.set] 

  [if.equal lhs='{module.dataset.pagesize}' rhs='-1']
    [module.set dataset.limit_string='' /]
    [module.set dataset.offset_string='' /]
  [/if.equal]


 
  //** If vars exists in the query **//
	[module.set dataset.vars]
    	[module.query.vars /]
    [/module.set]
    
  //** If With exists in the query, Create With **//
	[module.set with={module.query.with} /]		
	[templates.q0 set=module.dataset.q0 /]

//** additional Fields **//

	[module.set query_counter=0 /]
	[module.set query_no='q{module.query_counter}' /]

	[module.set add_field={module.query.with.add_field} /]		
	[templates.add_field /]

//** Create Filters **//

	[module.set filter={module.query.with.filter} /]		
		[templates.filter /]


	[do.@junk set=module.dataset.with_query]
		[module.dataset.q0 /]
		[if.not_empty module.dataset.field_query]
			,[module.get dataset.field_query.comma /]
		[/if.not_empty]
		[if.not_empty module.dataset.filter_query]
			,[module.get dataset.filter_query.comma /]
		[/if.not_empty]
	 [/do.@junk]

 
//** Generate the count if required **//
	[if.equal lhs='{module.query.query_count}' rhs='yes']
		[do.@junk set=module.dataset.count_query]
			[module.set current_query_no='{module.query_no}' /]
			[module.set current_query_no={module.query.with.bounded_data.query_no} not_empty='{module.query.with.bounded_data.query_no}'/]
			
            [module.dataset.vars /]

			[module.dataset.with_query /],
			bounded_data as 
			(
				SELECT * FROM [module.current_query_no /] 
				[if.not_empty module.query.max_count]
				LIMIT [module.query.max_count/]
				[/if.not_empty]
			),
			junk AS (SELECT * FROM bounded_data)
			select count(1) from bounded_data
		[/do.@junk]

		[mysqli.multi.fetch.count o.set=template.found_rows]
			[esc.safe module.dataset.count_query /]
		[/mysqli.multi.fetch.count]        
		[template.found_rows.count o.set=module.dataset.found_rows]
        		
		[aw2.get dataset_values pagesize="{module.dataset.pagesize}" found_rows="{module.dataset.found_rows}" set="module.temp_dataset" /]
		[module.set dataset.found_pages="{module.temp_dataset.found_pages}" /]
	[/if.equal]

//** Create Bounded Data **//

	[templates.bounded_data set=module.dataset.bounded_query /]

	[module.set dataset.junk_query]
	junk AS (SELECT * FROM bounded_data)
	[/module.set]

//** Set up transform **//		

[do.@junk set=module.dataset.meta_query.new not_empty='{module.query.transform.ref_id}']
		[module.set dataset.transform=yes /]
		select 'data_id' AS type,[module.query.transform.ref_id] AS data_id,'' AS meta_key,'' AS meta_value from bounded_data
[/do.@junk]

[do.@junk set=module.dataset.meta_query.new not_empty='{module.query.transpose.ref_id}']
		[module.set dataset.transpose=yes /]
		select 'data_id' AS type,[module.query.transpose.ref_id] AS data_id,'' AS meta_key,'' AS meta_value from bounded_data
[/do.@junk]


//** Create the meta query **//

	[module.set meta_query={module.query.meta} /]		
	[templates.meta_query /]

		[module.set dataset.meta_query.new  empty='{module.dataset.meta_query}']
				SELECT * FROM bounded_data
		[/module.set]  

//** join the query **//

	[do.@junk set=module.dataset.with_query]
 
			 [module.dataset.with_query /]
			,[module.get dataset.bounded_query /]
			,[module.get dataset.junk_query /]
	 [/do.@junk]
	[do.@junk set=module.dataset.query]
      [module.dataset.vars /]
	  [module.get dataset.with_query /]			    	
	  [aw2.get module.dataset.meta_query separator=' UNION ' /]
	[/do.@junk]
    
	[module.return module.dataset cond='{module.query.only_query}' equal='yes'/]
    

	[mysqli.multi.search dataset='{module.dataset}' set=module.dataset/]
	[module.return module.dataset /]
[/templates.add]


[templates.add set_query_no]
	[module.set previous_query_no='q{module.query_counter}'  /]
	[math.solve main='{module.query_counter}+1' set=module.query_counter /]
	[module.set query_no='q{module.query_counter}' /]
[/templates.add]



//** templates to add meta query **//

[templates.add meta_query]
  [loop.@meta_query module.query.meta]
	[module.set current_meta={@meta_query.item} /]	  
	[templates.meta_bounded_field true='{module.current_meta.bounded_field.exists}'/]	
	[templates.meta_series true='{module.current_meta.x.exists}'/]
	[templates.meta_field true='{module.current_meta.field.exists}'/]	
	[templates.meta_meta_keys true='{module.current_meta.meta_keys.exists}' /]	
	[templates.meta_taxonomy true='{module.current_meta.taxonomy.exists}' /]	
	[templates.meta_sql true='{module.current_meta.sql.exists}' /]	
	[templates.meta_aw2_collection_keys true='{module.current_meta.aw2_collection_keys.exists}' /]	
  [/loop.@meta_query]
[/templates.add]

[templates.add meta_series]
  [do.@junk set=module.dataset.meta_query.new]
		select 
		[templates.meta_x_format /] as x
		[if.not_empty module.current_meta.series.field]
		,[module.current_meta.series.field /] as series
		[/if.not_empty]
		, [module.current_meta.series_data.agg default="count"/]([module.current_meta.series_data.field/]) as series_data
		 from bounded_data
		group by  
		[templates.meta_x_format /]
		[if.not_empty module.current_meta.series.field]
		,[module.current_meta.series.field /]
		[/if.not_empty]
  [/do.@junk]
  [module.set current_meta='' /]	
[/templates.add]

[templates.add meta_x_format]
	[template.return module.current_meta.x.field empty='{module.current_meta.x.field_format}'/]

	[template.set x='{module.current_meta.x.field}' /]  
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='day' /]
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='days' /]
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='week' /]
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='month' /]
	
	[template.set x="DATE_FORMAT({template.x},'%Y-%u')" cond='{module.current_meta.x.field_format}' equal='weeks' /]

	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='months' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='quarter' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='year' /]

	
	[template.set x="CONCAT(YEAR({template.x}),'-',Quarter({template.x_column}))" cond='{module.current_meta.x.field_format}' equal='quarters' /]

	
	[template.set x='YEAR({template.x})' cond='{module.current_meta.x.field_format}' equal='years' /]
	
	[template.return template.x /]
[/templates.add]

[templates.add meta_x_format_backup]
	[template.return module.current_meta.x.field empty='{module.current_meta.x.field_format}'/]

	[template.set x='{module.current_meta.x.field}' /]  
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='day' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%u')" cond='{module.current_meta.x.field_format}' equal='week' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='month' /]
	[template.set x="CONCAT(YEAR({template.x}),'-',Quarter({template.x_column}))" cond='{module.current_meta.x.field_format}' equal='quarter' /]
	[template.set x='YEAR({template.x})' cond='{module.current_meta.x.field_format}' equal='year' /]
	[template.return template.x /]
[/templates.add]

[templates.add meta_bounded_field]
  [module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]  [do.@junk set=module.dataset.meta_query.new]
	  SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,'[module.current_meta.bounded_field]' as meta_key,[module.current_meta.bounded_field] as meta_value 
	  FROM bounded_data
  [/do.@junk]
  [module.set current_meta='' /]	
[/templates.add]


[templates.add meta_field]
  [module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
  [module.set current_meta.as_field='{module.current_meta.field}' empty='{module.current_meta.as_field}'/]
  [module.set current_meta.table='wp_posts' empty='{module.current_meta.table}'/]
  [module.set current_meta.id_field='ID' empty='{module.current_meta.id_field}'/]
  [module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]

  [do.@junk set=module.dataset.meta_query.new]
	  SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,'[module.current_meta.as_field]' as meta_key,[module.current_meta.field] as meta_value 
	  FROM [module.current_meta.table] AS meta JOIN bounded_data ON meta.[module.current_meta.id_field /]=bounded_data.[module.current_meta.ref_id /] 
  [/do.@junk]
  [module.set current_meta='' /]	

[/templates.add]

[templates.add meta_meta_keys]
[module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
[module.set current_meta.meta_key_field='meta_key' empty='{module.current_meta.meta_key_field}'/]
[module.set current_meta.meta_value_field='meta_value' empty='{module.current_meta.meta_value_field}'/]
[module.set current_meta.table='wp_postmeta' empty='{module.current_meta.table}'/]
[module.set current_meta.id_field='post_id' empty='{module.current_meta.id_field}'/]
[module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]


  [do.@junk set=module.dataset.meta_query.new]
	SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,[module.current_meta.meta_key_field] as meta_key,[module.current_meta.meta_value_field] as meta_value 
	FROM [module.current_meta.table] AS meta JOIN bounded_data ON meta.[module.current_meta.id_field /]=bounded_data.[module.current_meta.ref_id /] where [module.current_meta.meta_key_field] in 
	([module.current_meta.meta_keys.comma.quote_comma /])	
  [/do.@junk]
  [module.set current_meta='' /]	

[/templates.add]

[templates.add meta_taxonomy]
	[module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
	[module.set current_meta.taxonomy_value_field='name' empty='{module.current_meta.taxonomy_value_field}'/]
	[module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]


  [do.@junk set=module.dataset.meta_query.new]
	SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,taxonomy as meta_key,[module.current_meta.taxonomy_value_field] as meta_value 
	FROM all_terms AS meta JOIN bounded_data ON meta.object_id=bounded_data.[module.current_meta.ref_id /] where taxonomy in 
	([module.current_meta.taxonomy.comma.quote_comma /])	
  [/do.@junk]
  [module.set current_meta='' /]	
[/templates.add]

[templates.add meta_sql]
  [do.@junk set=module.dataset.meta_query.new]
	  [code.run module.current_meta.sql /]
  [/do.@junk]
  [module.set current_meta='' /]	  
[/templates.add]


[templates.add meta_aw2_collection_keys]
	[module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
	[module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]

	[do.@junk set=module.dataset.meta_query.new]
	 SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /],meta_key,meta_value FROM [module.current_meta.table /] AS meta JOIN bounded_data ON meta.object_id=bounded_data.[module.current_meta.ref_id /] 
	  where meta.meta_key in (
		  [module.current_meta.aw2_collection_keys.comma.quote_comma /]
	  )
	  [if.not_empty module.current_meta.coll_id]
		  AND meta.coll_id='[module.current_meta.coll_id /]'
	  [/if.not_empty]
	  [if.not_empty module.current_meta.coll_type]
		  AND meta.coll_type='[module.current_meta.coll_type /]'
	  [/if.not_empty]
	[/do.@junk]
  [module.set current_meta='' /]		
[/templates.add]




//** templates to add bounded data **//

[templates.add bounded_data]
		[module.set current_query_no='{module.query_no}' /]
		[module.set current_query_no={module.query.with.bounded_data.query_no} not_empty='{module.query.with.bounded_data.query_no}'/]

	bounded_data as 
	(
	  SELECT * FROM [module.current_query_no /] 
			[if.not_empty module.query.order]
				ORDER BY [module.get query.order /]
			[/if.not_empty]

	  [module.dataset.limit_string /] 
	  [module.dataset.offset_string /]
	)
[/templates.add]




//** templates to build filter **//
[templates.add filter]
	[loop.@filter module.filter]
	  [module.set current_filter={@filter.item} /]	

	  [templates.filter_sql true='{module.current_filter.sql.exists}' /]	
	  [templates.filter_meta_table true='{module.current_filter.meta_table.exists}' /]	
	  [templates.filter_meta_key true='{module.current_filter.meta_key.exists}' /]	
	  [templates.filter_taxonomy true='{module.current_filter.taxonomy.exists}' /]	
	  [templates.filter_period true='{module.current_filter.period.exists}' /]	
	  [templates.filter_period_yyyymmdd true='{module.current_filter.period_yyyymmdd.exists}' /]	
	  [templates.filter_between true='{module.current_filter.after_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.after_date_yyyymmdd.exists}' /]
	  [templates.filter_between true='{module.current_filter.before_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.before_date_yyyymmdd.exists}' /]
	  [templates.filter_between true='{module.current_filter.from_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.from_date_yyyymmdd.exists}' /]
	  [templates.filter_between true='{module.current_filter.to_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.to_date_yyyymmdd.exists}' /]
	  [templates.filter_field true='{module.current_filter.field.exists}' /]			
	  [templates.filter_id_field true='{module.current_filter.id_field.exists}' /]

	[/loop.@filter]
[/templates.add]


[templates.add after_filter_query]

  [templates.set_query_no /]

  [do.@junk set=module.dataset.filter_query.new]

	[module.query_no /] as 
	(
	  select [module.previous_query_no /].* from [module.current_filter.table /] join [module.previous_query_no /] on 
	  [module.previous_query_no /].[module.current_filter.ref_id]=[module.current_filter.table /].[module.current_filter.id_field /] 
				  where 
		  1=1
		  and
	  [module.current_filter.sql_where /]
	)  
  [/do.@junk]


[/templates.add] 



[templates.add filter_meta_key]
	[module.set current_filter.meta_value='junk' cond='{module.current_filter.operator}' equal='exists' /]
	[if.not_whitespace module.current_filter.meta_value]
		[module.current_filter.table set=module.current_filter.table default=wp_postmeta /]
		[module.current_filter.id_field set=module.current_filter.id_field default=post_id /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]
		[module.current_filter.meta_key_field set=module.current_filter.meta_key_field default='meta_key' /]
		[module.current_filter.meta_key.comma.quote_comma set=module.current_filter.meta_key/]		
		[module.current_filter.meta_value_field set=module.current_filter.column default='meta_value'/]	
		[module.current_filter.meta_value set=module.current_filter.value /]	


		[do.@junk set='module.current_filter.sql_where']	
			[module.current_filter.table].[module.current_filter.meta_key_field /] in ([module.current_filter.meta_key/]) and 
			[templates.apply_operator where='{module.current_filter}']
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_meta_table]
	[module.set current_filter.meta_value='junk' cond='{module.current_filter.operator}' equal='exists' /]
	[if.not_whitespace module.current_filter.meta_value]
		[module.current_filter.meta_table set=module.current_filter.table /]
		[module.current_filter.id_field set=module.current_filter.id_field default=object_id /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]
		[module.current_filter.meta_key_field set=module.current_filter.meta_key_field default='meta_key' /]
		[module.current_filter.meta_key.comma.quote_comma set=module.current_filter.meta_key/]		
		[module.current_filter.meta_value_field set=module.current_filter.column default='meta_value'/]	
		[module.current_filter.meta_value set=module.current_filter.value /]	
		[do.@junk set='module.current_filter.sql_where']
			[module.current_filter.table].coll_id='[module.current_filter.coll_id /]'	
			and 			
			[module.current_filter.table].[module.current_filter.meta_key_field /] in ([module.current_filter.meta_key/]) and 
			[templates.apply_operator where='{module.current_filter}']
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]


[templates.add filter_field]
	[if.not_whitespace module.current_filter.field]
		[module.current_filter.table set=module.current_filter.table default=wp_posts /]
		[module.current_filter.id_field set=module.current_filter.id_field default='ID' /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]
		[module.current_filter.field set=module.current_filter.column/]
		[module.current_filter.field_value set=module.current_filter.value/]

		[do.@junk set='module.current_filter.sql_where']	
			[templates.apply_operator where='{module.current_filter}']
		[/do.@junk]

		[templates.after_filter_query /]	
	[/if.not_whitespace] 

	[module.set current_filter='' /]	
[/templates.add]


[templates.add filter_id_field]
	[if.not_whitespace module.current_filter.id_field]
		[module.current_filter.table set=module.current_filter.table default=wp_posts /]
		[module.current_filter.id_field set=module.current_filter.id_field /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]

		[do.@junk set='module.current_filter.sql_where']	
		1=1
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_sql]
	[if.not_whitespace module.current_filter.sql]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]


		[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
			[module.query_no /] as 
				(
				[code.run module.current_filter.sql /]
				)
		[/do.@junk]
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]



[templates.add filter_taxonomy]
	[if.not_whitespace module.current_filter.term]
		[module.current_filter.table set=module.current_filter.table default=all_terms /]
		[module.current_filter.id_field set=module.current_filter.id_field default=object_id /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]

		[module.current_filter.taxonomy_field set=module.current_filter.taxonomy_field default='taxonomy' /]
		[module.current_filter.taxonomy.comma.quote_comma set=module.current_filter.taxonomy/]

		[module.current_filter.meta_value_field set=module.current_filter.column default='slug'/]		
		[module.current_filter.term set=module.current_filter.value/]

		[do.@junk set='module.current_filter.sql_where']	
			[module.current_filter.table].[module.current_filter.taxonomy_field /] in ([module.current_filter.taxonomy/]) and 
			[templates.apply_operator where='{module.current_filter}' /]
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_period]
	[if.not_whitespace module.current_filter.period]
		[module.current_filter.field set=module.current_filter.field /]
		[module.current_filter.period set=module.current_filter.period default='day:today'/]
		[module.current_filter.which set=module.current_filter.which default=0 /]
		
        [date.aw2_period period="{module.current_filter.period}" set=template.select_period_arr/]

		[do.@junk set='module.current_filter.sql_where']	
			date([module.current_filter.field]) <= DATE([template.get select_period_arr.end_date /])
			AND date([module.current_filter.field]) >= DATE([template.get select_period_arr.start_date /])
		[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_period_yyyymmdd]
	[if.not_whitespace module.current_filter.period_yyyymmdd]
		[module.current_filter.field set=module.current_filter.field /]
		[module.current_filter.period_yyyymmdd set=module.current_filter.period default='day:today'/]
		[module.current_filter.which set=module.current_filter.which default=0 /]
		
        [date.aw2_period period="{module.current_filter.period}" set=template.select_period_arr/]

		[do.@junk set='module.current_filter.sql_where']	
			[module.current_filter.field] <= '[template.get select_period_arr.end_date m.date_format='Ymd' /]'
			AND [module.current_filter.field] >= '[template.get select_period_arr.start_date m.date_format='Ymd' /]'
		[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_between]
	[module.current_filter.field set=module.current_filter.field /]

	[do.@junk set='module.current_filter.sql_where']	
		1=1 
		[if.not_whitespace module.current_filter.before_date]
			 and date([module.current_filter.field /]) < date('[module.current_filter.before_date /]')	
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.to_date]
			 and date([module.current_filter.field /]) <= date('[module.current_filter.to_date /]')	
		[/if.not_whitespace] 

		[if.not_whitespace module.current_filter.after_date]
			 and date([module.current_filter.field /]) > date('[module.current_filter.after_date /]')	
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.from_date]
			 and date([module.current_filter.field /]) >= date('[module.current_filter.from_date /]')	
		[/if.not_whitespace]
	[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_between_yyyymmdd]
	[module.current_filter.field set=module.current_filter.field /]

	[do.@junk set='module.current_filter.sql_where']	
		1=1 
		[if.not_whitespace module.current_filter.before_date_yyyymmdd]
			 and [module.current_filter.field /] < '[module.current_filter.before_date_yyyymmdd /]'
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.to_date_yyyymmdd]
			 and [module.current_filter.field /] <= '[module.current_filter.to_date_yyyymmdd /]'
		[/if.not_whitespace] 

		[if.not_whitespace module.current_filter.after_date_yyyymmdd]
			 and [module.current_filter.field /]) > '[module.current_filter.after_date_yyyymmdd /]'
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.from_date_yyyymmdd]
			 and [module.current_filter.field /] >= '[module.current_filter.from_date_yyyymmdd /]'
		[/if.not_whitespace]
	[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[module.set current_filter='' /]	
[/templates.add]


//** templates to build add_field **//
[templates.add add_field]
	[loop.@add_field module.add_field]
		[module.set current_field={@add_field.item} /]	
					
		[templates.add_field_meta_key true='{module.current_field.meta_key.exists}' /]	
		[templates.add_field_aw2_meta_key true='{module.current_field.aw2_meta_key.exists}' /]	

		[templates.add_field_taxonomy true='{module.current_field.taxonomy.exists}' /]
		[templates.add_field_sql true='{module.current_field.sql.exists}' /]
		[templates.add_field_field true='{module.current_field.field.exists}' /]    
					[module.set current_query_no='' /]		
	[/loop.@add_field]
[/templates.add]


[templates.add add_field_meta_key]
	[aw2.get module.current_field.meta_key set=template.meta_key /]

	[aw2.get module.current_field.id_field set=template.id_field default='post_id'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]

	[aw2.get module.current_field.meta_value_field set=template.meta_value_field default='meta_value'/]

	[aw2.get module.current_field.field set=template.field default='{template.meta_key}' /]
	[aw2.get module.current_field.table set=template.table default=wp_postmeta /]

	[aw2.get module.current_field.meta_key_field set=template.meta_key_field default='meta_key' /]
    
	[aw2.get module.current_field.ifnull set=template.ifnull/]


	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]

	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*, 
	  
      [if.not_empty template.ifnull]
      	ifnull([template.meta_value_field /],'[template.ifnull /]') as [template.field /]  
      [/if.not_empty]
      [if.else]
      	[template.meta_value_field /] as [template.field /]  
      [/if.else]
      
      from
      [module.previous_query_no /] left join [template.table /]   on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] and [template.meta_key_field /]='[template.meta_key/]' )
	[/do.@junk]
		[module.set current_field='' /]	

[/templates.add]


[templates.add add_field_aw2_meta_key]
	[aw2.get module.current_field.aw2_meta_key set=template.meta_key /]
	[aw2.get module.current_field.coll_id set=template.coll_id /]

	[aw2.get module.current_field.id_field set=template.id_field default='object_id'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]

	[aw2.get module.current_field.meta_value_field set=template.meta_value_field default='meta_value'/]

	[aw2.get module.current_field.field set=template.field default='{template.meta_key}' /]
	[aw2.get module.current_field.table set=template.table /]

	[aw2.get module.current_field.meta_key_field set=template.meta_key_field default='meta_key' /]
	[aw2.get module.current_field.ifnull set=template.ifnull/]
    
	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]

	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*,
      
      [if.not_empty template.ifnull]
      	ifnull([template.meta_value_field /],'[template.ifnull /]') as [template.field /]  
      [/if.not_empty]
      [if.else]
      	[template.meta_value_field /] as [template.field /]  
      [/if.else]
      
	  from [module.previous_query_no /] left join [template.table /]   on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] 
      			[if.not_empty template.coll_id]
			and coll_id='[template.coll_id]'
			[/if.not_empty]

      and [template.meta_key_field /]='[template.meta_key/]' 
	)		
	[/do.@junk]
		[module.set current_field='' /]	

[/templates.add]


[templates.add add_field_field]
	[aw2.get module.current_field.field set=template.field /]
	[aw2.get module.current_field.as_field set=template.as_field default='{template.field}' /]

	[aw2.get module.current_field.id_field set=template.id_field default='ID'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]

	[aw2.get module.current_field.table set=template.table default=wp_posts /]
	[aw2.get module.current_field.ifnull set=template.ifnull/]

	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]

	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*, 
      
      [if.not_empty template.ifnull]
      	ifnull([template.field /],'[template.ifnull /]') as [aw2.get template.as_field /]   
      [/if.not_empty]
      [if.else]
		  [template.field /] as [aw2.get template.as_field /] 
      [/if.else]


      from 
	  [module.previous_query_no /] left join [template.table /]
	  on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] )
	[/do.@junk]
		[module.set current_field='' /]	
[/templates.add]

[templates.add add_field_taxonomy]
	[aw2.get module.current_field.taxonomy set=template.taxonomy /]

	[aw2.get module.current_field.id_field set=template.id_field default='data_id'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]
	[aw2.get module.current_field.meta_value_field set=template.meta_value_field default='name'/]
	[aw2.get module.current_field.field set=template.field default='{template.taxonomy}' /]
	[aw2.get module.current_field.table set=template.table default=all_terms /]
	[aw2.get module.current_field.ifnull set=template.ifnull/]
	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]
	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*, 

      [if.not_empty template.ifnull]
      	ifnull([template.meta_value_field /],'[template.ifnull /]') as [template.field /]  
      [/if.not_empty]
      [if.else]
      	[template.meta_value_field /] as [template.field /]  
      [/if.else]
      
 from 
	  [module.previous_query_no /] left join [aw2.get template.table /]
	   on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] and taxonomy='[template.taxonomy/]' )
	[/do.@junk]
		[module.set current_field='' /]	        
[/templates.add]

[templates.add add_field_sql]

	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]
		[module.current_query_no /] as 
		(
		[code.run module.current_field.sql /]
		 )
	[/do.@junk]
		[module.set current_field='' /]			
[/templates.add]


//** templates to build q0 **//
[templates.add q0]

		[module.set current_query_no='q0' /]
		[module.set current_query_no={module.with.query_no} not_empty='{module.with.query_no}'/]
	

    
	with [module.current_query_no /] as (	
	  [templates.q0_sql not_empty='{module.with.sql}' /]	
	  [templates.q0_published_posts not_empty='{module.with.published_posts}' /]	
	  [templates.q0_aw2_filter_query not_empty='{module.with.aw2_filter_query}' /]	
	)
[/templates.add]

[templates.add q0_sql]
	[do.@i]
		[module.with.sql /]
	[/do.@i]
[/templates.add]

[templates.add q0_published_posts]
	[do.@i]
		Select ID as data_id from wp_posts where post_type='[module.with.published_posts.post_type /]' and post_status='publish'
	[/do.@i]
[/templates.add]

[templates.add q0_aw2_filter_query]
	[do.@i]
	  SELECT
	  object_id AS data_id
			[if.not_empty module.with.aw2_filter_query.select_fields]
			,[module.get with.aw2_filter_query.select_fields]
			[/if.not_empty]
	  FROM [module.get with.aw2_filter_query.table /] as d1
	  WHERE
	  1=1
	  [templates.aw2_where_clauses where='{module.with.aw2_filter_query.where}'/]
	[/do.@i]
[/templates.add]

[templates.add aw2_where_clauses]
  [loop.@i template.where]
	[template.set wheres.new]
	  [aw2.switch]
		[aw2.case cond="{@i.item.data_type}" equal="period"]
		  
          [date.aw2_period period="{@i.item.value}" set=template.select_period_arr/]

		  AND DATE([aw2.get @i.item.column /]) <= DATE([template.get select_period_arr.end_date /])
		  AND DATE([aw2.get @i.item.column /]) >= DATE([template.get select_period_arr.start_date /])
		[/aw2.case]

		[aw2.case not_empty="{@i.item.column}"]
		  AND [templates.apply_operator where={@i.item} /]
		[/aw2.case]

		[aw2.case not_empty="{@i.item.sql}"]
		  [aw2.get @i.item.sql /]
		[/aw2.case]

	  [/aw2.switch]
	[/template.set]
  [/loop.@i]

  [template.return template.wheres.space /]
[/templates.add]




//** templates for apply operators **//
[templates.add apply_operator]
		[template.set where.operator="{template.where.operator}" default='in' /]
		[template.set where.data_type="{template.where.data_type}" default='string' /]

		[templates.basic_operator list='lt,gt,lte,gte,eq,neq' contains='{template.where.operator}' where='{template.where}'/]

		[templates.whitespace_operator list='whitespace' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.not_whitespace_operator list='not_whitespace' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.null_operator list='null,not_null' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.like_operator list='like,not_like' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.in_operator list='in,not_in' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.exists_operator list='exists' contains='{template.where.operator}' where='{template.where}'/]	
[/templates.add]

[templates.add basic_operator]

  [if.contains needle="{template.where.data_type}" haystack="string,number"]
	[template.where.column /]
  [/if.contains]
  [if.contains needle="{template.where.data_type}" haystack="date"]
	DATE([template.where.column /])
  [/if.contains]

  [if.equal lhs='{template.where.operator}' rhs='lt']<[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='gt']>[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='lte']<=[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='gte']>=[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='eq']=[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='neq']<>[/if.equal]

	[if.contains needle="{template.where.data_type}" haystack="string"]
	[esc.str template.where.value /]
  [/if.contains]

	[if.contains needle="{template.where.data_type}" haystack="number"]
	[esc.num template.where.value /]
  [/if.contains]

  [if.contains needle="{template.where.data_type}" haystack="date"]
	DATE([esc.str template.where.value /])
  [/if.contains]

[/templates.add]

[templates.add like_operator]
  [template.where.column /]

  [if.equal lhs='{template.where.operator}' rhs='like'] LIKE [/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='not_like'] NOT LIKE [/if.equal]

	'%[esc.like template.where.value /]%'

[/templates.add]

[templates.add null_operator]
  [template.where.column /]

  [if.equal lhs='{template.where.operator}' rhs='null'] IS NULL [/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='not_null'] IS NOT NULL [/if.equal]
[/templates.add]


[templates.add whitespace_operator]
(
  [template.where.column /]
  [if.equal lhs='{template.where.operator}' rhs='whitespace'] IS NULL [/if.equal]
or
  TRIM([template.where.column /])
  [if.equal lhs='{template.where.operator}' rhs='whitespace'] = '' [/if.equal]
)
[/templates.add]

[templates.add not_whitespace_operator]
(
  [template.where.column /]
	[if.equal lhs='{template.where.operator}' rhs='not_whitespace'] IS NOT NULL [/if.equal]

and

  TRIM([template.where.column /])
	[if.equal lhs='{template.where.operator}' rhs='not_whitespace'] <> '' [/if.equal]
)

[/templates.add]

[templates.add in_operator]
  [if.equal lhs='{template.where.operator}' rhs='in'] [/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='not_in'] NOT [/if.equal]

	FIND_IN_SET([template.where.column /], 
	
	[if.contains needle="{template.where.data_type}" haystack="string"]
		[esc.in template.where.value /]
	[/if.contains]

	[if.contains needle="{template.where.data_type}" haystack="number"]
		[esc.in template.where.value /]
	[/if.contains]
	
	)
	

	
[/templates.add]

[templates.add exists_operator]
	1=1
[/templates.add]


[templates.add filter_period_backup]
	[if.not_whitespace module.current_filter.period]
		[module.current_filter.field set=module.current_filter.field /]
		[module.current_filter.period set=module.current_filter.period default='day'/]
		[module.current_filter.which set=module.current_filter.which default=0 /]

		[do.@junk set='module.current_filter.sql_where']	
			[if.equal lhs='{module.current_filter.period}' rhs='day']
				[module.set current_filter.which=0 cond='{module.current_filter.which}' equal='today'/]
				[module.set current_filter.which=1 cond='{module.current_filter.which}' equal='yesterday'/]
					date([module.current_filter.field]) = CURDATE() - INTERVAL [module.current_filter.which/] DAY
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='days']
					date([module.current_filter.field]) >= CURDATE() - INTERVAL [module.current_filter.which/] DAY
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='month']
				[module.set current_filter.which=0 cond='{module.current_filter.which}' equal='this_month'/]
				[module.set current_filter.which=1 cond='{module.current_filter.which}' equal='last_month'/]
					month([module.current_filter.field])=month(DATE_FORMAT(CURDATE(), '%Y-%m-01')-interval [module.current_filter.which/] month) and
					year([module.current_filter.field])=year(DATE_FORMAT(CURDATE(), '%Y-%m-01')-interval [module.current_filter.which/] month)
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='months']
					date([module.current_filter.field]) >= DATE_FORMAT(CURDATE(), '%Y-%m-01')-interval ([module.current_filter.which/] - 1) month
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='year']
				[module.set current_filter.which=0 cond='{module.current_filter.which}' equal='this_year'/]
				[module.set current_filter.which=1 cond='{module.current_filter.which}' equal='this_year'/]
					YEAR([module.current_filter.field]) = YEAR(CURDATE()) - [module.current_filter.which/]
			[/if.equal] 
		[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>674086</wp:post_id>
		<wp:post_date><![CDATA[2018-11-13 10:57:00]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-13 10:57:00]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[meta_query]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[db_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>Object</title>
		<link>https://awxdocs.com/?post_type=db_2&#038;p=674087</link>
		<pubDate>Thu, 15 Nov 2018 06:37:02 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=db_2&#038;p=669092</guid>
		<description></description>
		<content:encoded><![CDATA[  //**
Update Meta data for one object_id
  **// 

[templates.add update]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]
 
  [template.set sql]
     set @object_id=[esc.id template.object_id /];
     select ID from [esc.table template.meta_table /] where object_id=@object_id FOR UPDATE;  
	
	[loop.@meta template.meta]
			set @cnt=0;
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type=[esc.id @meta.item.coll_type /];
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];
          
			select @cnt:=count(1) from [esc.table template.meta_table /] where object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]
  
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
  
  [template.return template.transaction /]
[/templates.add]  



  //**
select object meta for one object_id
  **// 
[templates.add fetch]

	//******return when object_id is empty******//
	[template.return template.object_id c.empty="template.object_id" /]
    

	[template.set query c.empty=template.meta_keys]
			set @object_id=[esc.id template.object_id /];
			set @coll_id=[esc.id template.coll_id /];
			select meta_key,meta_value from [esc.table template.meta_table /] 
            where 
            coll_id=@coll_id 
            and object_id=@object_id;
	[/template.set]

	[template.set query c.not_empty=template.meta_keys]	
		set @object_id=[esc.id template.object_id /];
		set @coll_id=[esc.id template.coll_id /];
		set @meta_keys=[esc.in template.meta_keys /];
			
		select meta_key,meta_value from [esc.table template.meta_table /] where coll_id=@coll_id and object_id=@object_id 
		and FIND_IN_SET(meta_key,@meta_keys);
	[/template.set]
    
	[mysqli.multi.fetch.meta_keys o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.multi.fetch.meta_keys]
    
	[template.return template.rs_arr/]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>674087</wp:post_id>
		<wp:post_date><![CDATA[2018-11-15 06:37:02]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-15 06:37:02]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[object]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[db_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>Collection</title>
		<link>https://awxdocs.com/?post_type=db_2&#038;p=674088</link>
		<pubDate>Thu, 15 Nov 2018 06:48:38 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=db_2&#038;p=669150</guid>
		<description></description>
		<content:encoded><![CDATA[//****fetch data against the collection*****//
[templates.add fetch]

	//******return when coll_id is empty******//
 	[template.return template.coll_id c.empty="template.coll_id" /]
	
    //***when meta_keys is empty****//
	[template.set query c.empty=template.meta_keys]
      set @coll_id=[esc.id template.coll_id /];
      select meta_key,meta_value from [esc.table template.meta_table /] 
      where 
      coll_id=@coll_id;
	[/template.set]
    
    //****when meta_keys are not empty***//
    [template.set query c.not_empty=template.meta_keys]	
      set @coll_id=[esc.id template.coll_id /];
      set @meta_keys=[esc.in template.meta_keys /];
      select meta_key,meta_value from [esc.table template.meta_table /] where coll_id=@coll_id
      and FIND_IN_SET(meta_key,@meta_keys);
	[/template.set]
    
    //****run query*****//
    [mysqli.multi.fetch.meta_keys o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.multi.fetch.meta_keys]

	//*****return response***//
	[template.return template.rs_arr/]

[/templates.add]

//****fetch data against the object_id and collection*****//
[templates.add fetch_all]
	
	//******return when coll_id is empty******//
 	[template.return template.object_id c.empty="template.object_id" /]
	
    //***when meta_keys is empty****//
	[template.set query c.empty=template.meta_keys]
      select coll_id, meta_key, meta_value from [esc.table template.meta_table /] 
      where object_id=[esc.id template.object_id /]
      and coll_type=[esc.id template.coll_type /];
	[/template.set]
    
    //****when meta_keys are not empty***//
    [template.set query c.not_empty=template.meta_keys]	
      select coll_id, meta_key, meta_value from [esc.table template.meta_table /] 
      where object_id=[esc.id template.object_id /]
      and coll_type=[esc.id template.coll_type /]
      and FIND_IN_SET(meta_key,[esc.in template.meta_keys /]);
	[/template.set]
    
    //****run query*****// 
    [mysqli.multi.fetch.grouped c.not_empty='template.query' o.set="template.rs_arr"]
		[template.query/]
	[/mysqli.multi.fetch.grouped]
    
	//*****return response***//
	[template.return template.rs_arr/]

[/templates.add]

//*****update collection data******//
[templates.add update]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]

  [template.set sql]
    set @object_id=[esc.id template.object_id /];
    select ID from [esc.table template.meta_table /]  where object_id=@object_id for update ;
	[loop.@meta template.meta]
			set @cnt=0;	
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type=[esc.id template.coll_type /];
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];			
			
			select @cnt:=count(1) from [esc.table template.meta_table /] where object_id=@object_id and coll_id=@coll_id and coll_type=@coll_type and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					object_id=@object_id and coll_id=@coll_id and coll_type=@coll_type and meta_key=@meta_key
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]
  
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
	[template.return template.transaction /]
[/templates.add]  

//*****update collection data******//
[templates.add update_old]

  //******return when object_id is empty******//
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]

  [template.set sql]
	[loop.@meta template.meta]
			set @cnt=0;
			set @object_id=[esc.id template.object_id /];
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type=[esc.id template.coll_type /];
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];			
			
			select @cnt:=count(1) from [esc.table template.meta_table /] where object_id=@object_id and coll_id=@coll_id and coll_type=@coll_type and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					object_id=@object_id and coll_id=@coll_id and coll_type=@coll_type and meta_key=@meta_key
					for update
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]
  
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
	[template.return template.transaction /]
[/templates.add]  ]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>674088</wp:post_id>
		<wp:post_date><![CDATA[2018-11-15 06:48:38]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-15 06:48:38]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[collection]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[db_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>Meta Ext</title>
		<link>https://awxdocs.com/?post_type=db_2&#038;p=777173</link>
		<pubDate>Mon, 06 May 2019 09:06:27 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://loantap.in/?post_type=db_2&#038;p=777173</guid>
		<description></description>
		<content:encoded><![CDATA[  //**
Update Meta data for one object_id
  **// 

//***updates the meta***//
[templates.add update]

  //******return when object_id is empty******//
 [template.return template.reference_id c.empty="template.reference_id" /]
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]
 
  [template.set sql]
    set @reference_id=[esc.id template.reference_id /];
    set @object_id=[esc.id template.object_id /];
    select ID from [esc.table template.meta_table /]  where reference_id=@reference_id and object_id=@object_id for update;
	[loop.@meta template.meta]
			set @cnt=0;
			set @parent_id=[esc.id template.parent_id /];
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type='[env.@meta.item.coll_type default={template.coll_type}/]';
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];				
			
			select @cnt:=count(1) from [esc.table template.meta_table /] 
            where reference_id=@reference_id and object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](reference_id,parent_id,object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@reference_id,@parent_id,@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					reference_id=@reference_id and object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]
  
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
    
  [template.return template.transaction /]
  
[/templates.add]

//***updates the meta***//
[templates.add update_old]

  //******return when object_id is empty******//
 [template.return template.reference_id c.empty="template.reference_id" /]
 [template.return template.object_id c.empty="template.object_id" /]
 [template.set app_user_email={app.session.email} default={app.user.email}/]
 
  [template.set sql]
    set @reference_id=[esc.id template.reference_id /];
    set @object_id=[esc.id template.object_id /];
    select ID from [esc.table template.meta_table /]  where reference_id=@reference_id and object_id=@object_id for update;
	[loop.@meta template.meta]
			set @cnt=0;
			set @parent_id=[esc.id template.parent_id /];
			set @coll_id=[esc.id template.coll_id /];
			set @coll_type='[env.@meta.item.coll_type default={template.coll_type}/]';
			set @meta_key=[esc.id @meta.item.meta_key /];
			set @meta_value=[esc.str @meta.item.meta_value /];
			set @email=[esc.str template.app_user_email /];				
			
			select @cnt:=count(1) from [esc.table template.meta_table /] 
            where reference_id=@reference_id and object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key;

			IF @cnt=0 THEN

				insert into [esc.table template.meta_table /](reference_id,parent_id,object_id,coll_id,coll_type,meta_key,meta_value,updated_by)
				VALUES (@reference_id,@parent_id,@object_id,@coll_id,@coll_type,@meta_key,@meta_value,@email);

			ELSE

				update [esc.table template.meta_table /]
				set 
				coll_type=@coll_type,
				meta_value=@meta_value,
				updated_by=@email,
				stamp=current_timestamp
				where ID in (
					select ID from [esc.table template.meta_table /]  where 
					reference_id=@reference_id and object_id=@object_id and coll_id=@coll_id and meta_key=@meta_key
				);

			END IF 
            ;

	[/loop.@meta]
  [/template.set]
  
  [mysqli.transaction.commit o.set="template.transaction"]
  	[template.sql /]
  [/mysqli.transaction.commit]
    
  [template.return template.transaction /]
  
[/templates.add]

//***select object meta for one object_id***//
[templates.add fetch]

	//******return when object_id is empty******//
	[template.return template.object_id c.empty="template.object_id" /]
    
	[template.set query c.empty=template.meta_keys]
      set @object_id=[esc.id template.object_id /];
      set @coll_id=[esc.id template.coll_id /];
      select meta_key,meta_value from [esc.table template.meta_table /] 
      where object_id=@object_id
      and coll_id=@coll_id;
	[/template.set]

	[template.set query c.not_empty=template.meta_keys]	
      set @object_id=[esc.id template.object_id /];
      set @coll_id=[esc.id template.coll_id /];
      set @meta_keys=[esc.in template.meta_keys /];

      select meta_key,meta_value from [esc.table template.meta_table /] 
      where object_id=@object_id 
      and coll_id=@coll_id  
      and FIND_IN_SET(meta_key,@meta_keys);
	[/template.set]
    
	[mysqli.multi.fetch.meta_keys o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.multi.fetch.meta_keys]
    
	[template.return template.rs_arr/]
    
[/templates.add]

//***select object meta for one reference_id***//
[templates.add fetch_all]

	//******return when reference_id is empty******//
	[template.return template.reference_id c.empty="template.reference_id" /]
  
	[template.set query c.empty=template.meta_keys]
        set @reference_id=[esc.id template.reference_id /];
        set @coll_id=[esc.id template.coll_id /];
        select object_id,meta_key,meta_value from [esc.table template.meta_table /] 
        where 
        reference_id=@reference_id
        and coll_id=@coll_id;
	[/template.set]

	[template.set query c.not_empty=template.meta_keys]	
		set @reference_id=[esc.id template.reference_id /];
		set @coll_id=[esc.id template.coll_id /];
		set @meta_keys=[esc.in template.meta_keys /];
			
		select object_id,meta_key,meta_value from [esc.table template.meta_table /] 
        where reference_id=@reference_id 
        and coll_id=@coll_id  
		and FIND_IN_SET(meta_key,@meta_keys);
	[/template.set]
    
	[mysqli.multi.fetch.grouped o.set="template.rs_arr"]
		[template.get query/]
	[/mysqli.multi.fetch.grouped]
    
	[template.return template.rs_arr/]
    
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>777173</wp:post_id>
		<wp:post_date><![CDATA[2019-05-06 09:06:27]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2019-05-06 09:06:27]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[meta-ext]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[db_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title>Meta Query 2</title>
		<link>https://awxdocs.com/?post_type=db_2&#038;p=906322</link>
		<pubDate>Fri, 18 Oct 2019 03:15:01 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://loantap.in/?post_type=db_2&#038;p=906322</guid>
		<description></description>
		<content:encoded><![CDATA[//** Vikas Build support for seek to make queries even faster **//

//** input module.query
output module.dataset
**//
[templates.add main]
    [aw2.get dataset_values pageno="{module.query.pageno}" pagesize="{module.query.pagesize}" offset="{module.query.offset}" set="module.dataset" /]

//** set Limit **//
    [module.set dataset.limit_string]
        LIMIT [module.dataset.pagesize /]
    [/module.set] 
//** set Offset **//

  [module.set dataset.offset_string]
        OFFSET [module.dataset.offset /]
  [/module.set] 

  [if.equal lhs='{module.dataset.pagesize}' rhs='-1']
    [module.set dataset.limit_string='' /]
    [module.set dataset.offset_string='' /]
  [/if.equal]


 
  //** If vars exists in the query **//
	[module.set dataset.vars]
    	[module.query.vars /]
    [/module.set]
    
  //** If With exists in the query, Create With **//
	[module.set with={module.query.with} /]		
	[templates.q0 set=module.dataset.q0 /]

//** additional Fields **//

	[module.set query_counter=0 /]
	[module.set query_no='q{module.query_counter}' /]

	[module.set add_field={module.query.with.add_field} /]		
	[templates.add_field /]

//** Create Filters **//

	[module.set filter={module.query.with.filter} /]		
		[templates.filter /]


	[do.@junk set=module.dataset.with_query]
		[module.dataset.q0 /]
		[if.not_empty module.dataset.field_query]
			,[module.get dataset.field_query.comma /]
		[/if.not_empty]
		[if.not_empty module.dataset.filter_query]
			,[module.get dataset.filter_query.comma /]
		[/if.not_empty]
	 [/do.@junk]


 

 
//** Generate the count if required **//
//** Generate the count if required **//
	[if.equal lhs='{module.query.query_count}' rhs='yes']
		[do.@junk set=module.dataset.count_query]
			[module.set current_query_no='{module.query_no}' /]
			[module.set current_query_no={module.query.with.bounded_data.query_no} not_empty='{module.query.with.bounded_data.query_no}'/]
			
            [module.dataset.vars /]

			[module.dataset.with_query /],
			bounded_data as 
			(
				SELECT * FROM [module.current_query_no /] 
				[if.not_empty module.query.max_count]
				LIMIT [module.query.max_count/]
				[/if.not_empty]
			),
			junk AS (SELECT * FROM bounded_data)
			select count(1) from bounded_data
		[/do.@junk]



  [if.not_empty module.query.only_query]
    	[if.user_can "develop_for_awesomeui"]
        	[module.return module.dataset.echo/]
        [/if.user_can]
    [/if.not_empty]

		[mysqli.multi.fetch.count o.set=template.found_rows]
			[esc.safe module.dataset.count_query /]
		[/mysqli.multi.fetch.count]        
		[template.found_rows.count o.set=module.dataset.found_rows]
        		
		[aw2.get dataset_values pagesize="{module.dataset.pagesize}" found_rows="{module.dataset.found_rows}" set="module.temp_dataset" /]
		[module.set dataset.found_pages="{module.temp_dataset.found_pages}" /]
	[/if.equal]

//** Create Bounded Data **//

	[templates.bounded_data set=module.dataset.bounded_query /]

	[module.set dataset.junk_query]
		junk AS (SELECT * FROM xtemp_data)
		select * from xtemp_data;
	[/module.set]

//** Set up transform **//		

[do.@junk set=module.dataset.meta_query.new not_empty='{module.query.transform.ref_id}']
		[module.set dataset.transform=yes /]
		select 'data_id' AS type,[module.query.transform.ref_id] AS data_id,'' AS meta_key,'' AS meta_value from bounded_data
[/do.@junk]

[do.@junk set=module.dataset.meta_query.new not_empty='{module.query.transpose.ref_id}']
		[module.set dataset.transpose=yes /]
		select 'data_id' AS type,[module.query.transpose.ref_id] AS data_id,'' AS meta_key,'' AS meta_value from bounded_data
[/do.@junk]


//** Create the meta query **//

	[module.set meta_query={module.query.meta} /]		
	[templates.meta_query /]

	[module.set dataset.meta_query.new  empty='{module.dataset.meta_query}']
		SELECT * FROM bounded_data
	[/module.set]  

//** join the query **//

	[do.@junk set=module.dataset.with_query]
		create temporary table bounded_data 
			 [module.dataset.with_query /]
			,[module.get dataset.bounded_query /]
			,[module.get dataset.junk_query /]
	 [/do.@junk]
	[do.@junk set=module.dataset.query]
      [module.dataset.vars /]
	  [module.get dataset.with_query /]			    	
	  [aw2.get module.dataset.meta_query separator=' UNION ' /]
	[/do.@junk]
    
     [if.not_empty module.query.only_query]
    	[if.user_can "develop_for_awesomeui"]
        	[module.return module.dataset.echo/]
        [/if.user_can]
    [/if.not_empty]
    
    
	[module.return module.dataset cond='{module.query.only_query}' equal='yes'/]    

	[mysqli.multi.search dataset='{module.dataset}' set=module.dataset/]
	[module.return module.dataset /]
[/templates.add]


[templates.add set_query_no]
	[module.set previous_query_no='q{module.query_counter}'  /]
	[math.solve main='{module.query_counter}+1' set=module.query_counter /]
	[module.set query_no='q{module.query_counter}' /]
[/templates.add]



//** templates to add meta query **//

[templates.add meta_query]
  [loop.@meta_query module.query.meta]
	[module.set current_meta={@meta_query.item} /]	  
	[templates.meta_bounded_field true='{module.current_meta.bounded_field.exists}'/]	
	[templates.meta_series true='{module.current_meta.x.exists}'/]
	[templates.meta_field true='{module.current_meta.field.exists}'/]	
	[templates.meta_meta_keys true='{module.current_meta.meta_keys.exists}' /]	
	[templates.meta_taxonomy true='{module.current_meta.taxonomy.exists}' /]	
	[templates.meta_sql true='{module.current_meta.sql.exists}' /]	
	[templates.meta_aw2_collection_keys true='{module.current_meta.aw2_collection_keys.exists}' /]	
  [/loop.@meta_query]
[/templates.add]

[templates.add meta_series]
  [do.@junk set=module.dataset.meta_query.new]
		select 
		[templates.meta_x_format /] as x
		[if.not_empty module.current_meta.series.field]
		,[module.current_meta.series.field /] as series
		[/if.not_empty]
		, [module.current_meta.series_data.agg default="count"/]([module.current_meta.series_data.field/]) as series_data
		 from bounded_data
		group by  
		[templates.meta_x_format /]
		[if.not_empty module.current_meta.series.field]
		,[module.current_meta.series.field /]
		[/if.not_empty]
  [/do.@junk]
  [module.set current_meta='' /]	
[/templates.add]

[templates.add meta_x_format]
	[template.return module.current_meta.x.field empty='{module.current_meta.x.field_format}'/]

	[template.set x='{module.current_meta.x.field}' /]  
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='day' /]
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='days' /]
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='week' /]
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='month' /]
	
	[template.set x="DATE_FORMAT({template.x},'%Y-%u')" cond='{module.current_meta.x.field_format}' equal='weeks' /]

	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='months' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='quarter' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='year' /]

	
	[template.set x="CONCAT(YEAR({template.x}),'-',Quarter({template.x_column}))" cond='{module.current_meta.x.field_format}' equal='quarters' /]

	
	[template.set x='YEAR({template.x})' cond='{module.current_meta.x.field_format}' equal='years' /]
	
	[template.return template.x /]
[/templates.add]

[templates.add meta_x_format_backup]
	[template.return module.current_meta.x.field empty='{module.current_meta.x.field_format}'/]

	[template.set x='{module.current_meta.x.field}' /]  
	[template.set x='DATE({template.x})' cond='{module.current_meta.x.field_format}' equal='day' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%u')" cond='{module.current_meta.x.field_format}' equal='week' /]
	[template.set x="DATE_FORMAT({template.x},'%Y-%m')" cond='{module.current_meta.x.field_format}' equal='month' /]
	[template.set x="CONCAT(YEAR({template.x}),'-',Quarter({template.x_column}))" cond='{module.current_meta.x.field_format}' equal='quarter' /]
	[template.set x='YEAR({template.x})' cond='{module.current_meta.x.field_format}' equal='year' /]
	[template.return template.x /]
[/templates.add]

[templates.add meta_bounded_field]
  [module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]  [do.@junk set=module.dataset.meta_query.new]
	  SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,'[module.current_meta.bounded_field]' as meta_key,[module.current_meta.bounded_field] as meta_value 
	  FROM bounded_data
  [/do.@junk]
  [module.set current_meta='' /]	
[/templates.add]


[templates.add meta_field]
  [module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
  [module.set current_meta.as_field='{module.current_meta.field}' empty='{module.current_meta.as_field}'/]
  [module.set current_meta.table='wp_posts' empty='{module.current_meta.table}'/]
  [module.set current_meta.id_field='ID' empty='{module.current_meta.id_field}'/]
  [module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]

  [do.@junk set=module.dataset.meta_query.new]
	  SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,'[module.current_meta.as_field]' as meta_key,[module.current_meta.field] as meta_value 
	  FROM [module.current_meta.table] AS meta JOIN bounded_data ON meta.[module.current_meta.id_field /]=bounded_data.[module.current_meta.ref_id /] 
  [/do.@junk]
  [module.set current_meta='' /]	

[/templates.add]

[templates.add meta_meta_keys]
[module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
[module.set current_meta.meta_key_field='meta_key' empty='{module.current_meta.meta_key_field}'/]
[module.set current_meta.meta_value_field='meta_value' empty='{module.current_meta.meta_value_field}'/]
[module.set current_meta.table='wp_postmeta' empty='{module.current_meta.table}'/]
[module.set current_meta.id_field='post_id' empty='{module.current_meta.id_field}'/]
[module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]


  [do.@junk set=module.dataset.meta_query.new]
	SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,[module.current_meta.meta_key_field] as meta_key,[module.current_meta.meta_value_field] as meta_value 
	FROM [module.current_meta.table] AS meta JOIN bounded_data ON meta.[module.current_meta.id_field /]=bounded_data.[module.current_meta.ref_id /] where [module.current_meta.meta_key_field] in 
	([module.current_meta.meta_keys.comma.quote_comma /])	
  [/do.@junk]
  [module.set current_meta='' /]	

[/templates.add]

[templates.add meta_taxonomy]
	[module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
	[module.set current_meta.taxonomy_value_field='name' empty='{module.current_meta.taxonomy_value_field}'/]
	[module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]


  [do.@junk set=module.dataset.meta_query.new]
	SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /] ,taxonomy as meta_key,[module.current_meta.taxonomy_value_field] as meta_value 
	FROM all_terms AS meta JOIN bounded_data ON meta.object_id=bounded_data.[module.current_meta.ref_id /] where taxonomy in 
	([module.current_meta.taxonomy.comma.quote_comma /])	
  [/do.@junk]
  [module.set current_meta='' /]	
[/templates.add]

[templates.add meta_sql]
  [do.@junk set=module.dataset.meta_query.new]
	  [code.run module.current_meta.sql /]
  [/do.@junk]
  [module.set current_meta='' /]	  
[/templates.add]


[templates.add meta_aw2_collection_keys]
	[module.set current_meta.data_id_field='data_id' empty='{module.current_meta.data_id_field}'/]
	[module.set current_meta.ref_id='data_id' empty='{module.current_meta.ref_id}'/]

	[do.@junk set=module.dataset.meta_query.new]
	 SELECT 'meta' AS type,bounded_data.[module.current_meta.data_id_field /],meta_key,meta_value FROM [module.current_meta.table /] AS meta JOIN bounded_data ON meta.object_id=bounded_data.[module.current_meta.ref_id /] 
	  where meta.meta_key in (
		  [module.current_meta.aw2_collection_keys.comma.quote_comma /]
	  )
	  [if.not_empty module.current_meta.coll_id]
		  AND meta.coll_id='[module.current_meta.coll_id /]'
	  [/if.not_empty]
	  [if.not_empty module.current_meta.coll_type]
		  AND meta.coll_type='[module.current_meta.coll_type /]'
	  [/if.not_empty]
	[/do.@junk]
  [module.set current_meta='' /]		
[/templates.add]




//** templates to add bounded data **//

[templates.add bounded_data]
		[module.set current_query_no='{module.query_no}' /]
		[module.set current_query_no={module.query.with.bounded_data.query_no} not_empty='{module.query.with.bounded_data.query_no}'/]

	xtemp_data as 
	(
	  SELECT * FROM [module.current_query_no /] 
			[if.not_empty module.query.order]
				ORDER BY [module.get query.order /]
			[/if.not_empty]

	  [module.dataset.limit_string /] 
	  [module.dataset.offset_string /]
	)
[/templates.add]




//** templates to build filter **//
[templates.add filter]
	[loop.@filter module.filter]
	  [module.set current_filter={@filter.item} /]	

	  [templates.filter_sql true='{module.current_filter.sql.exists}' /]	
	  [templates.filter_meta_table true='{module.current_filter.meta_table.exists}' /]	
	  [templates.filter_meta_key true='{module.current_filter.meta_key.exists}' /]	
	  [templates.filter_taxonomy true='{module.current_filter.taxonomy.exists}' /]	
	  [templates.filter_period true='{module.current_filter.period.exists}' /]	
	  [templates.filter_period_yyyymmdd true='{module.current_filter.period_yyyymmdd.exists}' /]	
	  [templates.filter_between true='{module.current_filter.after_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.after_date_yyyymmdd.exists}' /]
	  [templates.filter_between true='{module.current_filter.before_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.before_date_yyyymmdd.exists}' /]
	  [templates.filter_between true='{module.current_filter.from_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.from_date_yyyymmdd.exists}' /]
	  [templates.filter_between true='{module.current_filter.to_date.exists}' /]
	  [templates.filter_between_yyyymmdd true='{module.current_filter.to_date_yyyymmdd.exists}' /]
	  [templates.filter_field true='{module.current_filter.field.exists}' /]			
	  [templates.filter_id_field true='{module.current_filter.id_field.exists}' /]

	[/loop.@filter]
[/templates.add]


[templates.add after_filter_query]

  [templates.set_query_no /]

  [do.@junk set=module.dataset.filter_query.new]

	[module.query_no /] as 
	(
	  select [module.previous_query_no /].* from [module.current_filter.table /] join [module.previous_query_no /] on 
	  [module.previous_query_no /].[module.current_filter.ref_id]=[module.current_filter.table /].[module.current_filter.id_field /] 
				  where 
		  1=1
		  and
	  [module.current_filter.sql_where /]
	)  
  [/do.@junk]


[/templates.add] 



[templates.add filter_meta_key]
	[module.set current_filter.meta_value='junk' cond='{module.current_filter.operator}' equal='exists' /]
	[if.not_whitespace module.current_filter.meta_value]
		[module.current_filter.table set=module.current_filter.table default=wp_postmeta /]
		[module.current_filter.id_field set=module.current_filter.id_field default=post_id /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]
		[module.current_filter.meta_key_field set=module.current_filter.meta_key_field default='meta_key' /]
		[module.current_filter.meta_key.comma.quote_comma set=module.current_filter.meta_key/]		
		[module.current_filter.meta_value_field set=module.current_filter.column default='meta_value'/]	
		[module.current_filter.meta_value set=module.current_filter.value /]	


		[do.@junk set='module.current_filter.sql_where']	
			[module.current_filter.table].[module.current_filter.meta_key_field /] in ([module.current_filter.meta_key/]) and 
			[templates.apply_operator where='{module.current_filter}']
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_meta_table]
	[module.set current_filter.meta_value='junk' cond='{module.current_filter.operator}' equal='exists' /]
	[if.not_whitespace module.current_filter.meta_value]
		[module.current_filter.meta_table set=module.current_filter.table /]
		[module.current_filter.id_field set=module.current_filter.id_field default=object_id /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]
		[module.current_filter.meta_key_field set=module.current_filter.meta_key_field default='meta_key' /]
		[module.current_filter.meta_key.comma.quote_comma set=module.current_filter.meta_key/]		
		[module.current_filter.meta_value_field set=module.current_filter.column default='meta_value'/]	
		[module.current_filter.meta_value set=module.current_filter.value /]	
		[do.@junk set='module.current_filter.sql_where']
			[module.current_filter.table].coll_id='[module.current_filter.coll_id /]'	
			and 			
			[module.current_filter.table].[module.current_filter.meta_key_field /] in ([module.current_filter.meta_key/]) and 
			[templates.apply_operator where='{module.current_filter}']
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]


[templates.add filter_field]
	[if.not_whitespace module.current_filter.field]
		[module.current_filter.table set=module.current_filter.table default=wp_posts /]
		[module.current_filter.id_field set=module.current_filter.id_field default='ID' /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]
		[module.current_filter.field set=module.current_filter.column/]
		[module.current_filter.field_value set=module.current_filter.value/]

		[do.@junk set='module.current_filter.sql_where']	
			[templates.apply_operator where='{module.current_filter}']
		[/do.@junk]

		[templates.after_filter_query /]	
	[/if.not_whitespace] 

	[module.set current_filter='' /]	
[/templates.add]


[templates.add filter_id_field]
	[if.not_whitespace module.current_filter.id_field]
		[module.current_filter.table set=module.current_filter.table default=wp_posts /]
		[module.current_filter.id_field set=module.current_filter.id_field /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]

		[do.@junk set='module.current_filter.sql_where']	
		1=1
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_sql]
	[if.not_whitespace module.current_filter.sql]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]


		[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
			[module.query_no /] as 
				(
				[code.run module.current_filter.sql /]
				)
		[/do.@junk]
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]



[templates.add filter_taxonomy]
	[if.not_whitespace module.current_filter.term]
		[module.current_filter.table set=module.current_filter.table default=all_terms /]
		[module.current_filter.id_field set=module.current_filter.id_field default=object_id /]
		[module.current_filter.ref_id set=module.current_filter.ref_id default=data_id /]

		[module.current_filter.taxonomy_field set=module.current_filter.taxonomy_field default='taxonomy' /]
		[module.current_filter.taxonomy.comma.quote_comma set=module.current_filter.taxonomy/]

		[module.current_filter.meta_value_field set=module.current_filter.column default='slug'/]		
		[module.current_filter.term set=module.current_filter.value/]

		[do.@junk set='module.current_filter.sql_where']	
			[module.current_filter.table].[module.current_filter.taxonomy_field /] in ([module.current_filter.taxonomy/]) and 
			[templates.apply_operator where='{module.current_filter}' /]
		[/do.@junk]
		[templates.after_filter_query /]	
	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_period]
	[if.not_whitespace module.current_filter.period]
		[module.current_filter.field set=module.current_filter.field /]
		[module.current_filter.period set=module.current_filter.period default='day:today'/]
		[module.current_filter.which set=module.current_filter.which default=0 /]
		
        [date.aw2_period period="{module.current_filter.period}" set=template.select_period_arr/]

		[do.@junk set='module.current_filter.sql_where']	
			date([module.current_filter.field]) <= DATE([template.get select_period_arr.end_date /])
			AND date([module.current_filter.field]) >= DATE([template.get select_period_arr.start_date /])
		[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_period_yyyymmdd]
	[if.not_whitespace module.current_filter.period_yyyymmdd]
		[module.current_filter.field set=module.current_filter.field /]
		[module.current_filter.period_yyyymmdd set=module.current_filter.period default='day:today'/]
		[module.current_filter.which set=module.current_filter.which default=0 /]
		
        [date.aw2_period period="{module.current_filter.period}" set=template.select_period_arr/]

		[do.@junk set='module.current_filter.sql_where']	
			[module.current_filter.field] <= '[template.get select_period_arr.end_date m.date_format='Ymd' /]'
			AND [module.current_filter.field] >= '[template.get select_period_arr.start_date m.date_format='Ymd' /]'
		[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_between]
	[module.current_filter.field set=module.current_filter.field /]

	[do.@junk set='module.current_filter.sql_where']	
		1=1 
		[if.not_whitespace module.current_filter.before_date]
			 and date([module.current_filter.field /]) < date('[module.current_filter.before_date /]')	
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.to_date]
			 and date([module.current_filter.field /]) <= date('[module.current_filter.to_date /]')	
		[/if.not_whitespace] 

		[if.not_whitespace module.current_filter.after_date]
			 and date([module.current_filter.field /]) > date('[module.current_filter.after_date /]')	
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.from_date]
			 and date([module.current_filter.field /]) >= date('[module.current_filter.from_date /]')	
		[/if.not_whitespace]
	[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[module.set current_filter='' /]	
[/templates.add]

[templates.add filter_between_yyyymmdd]
	[module.current_filter.field set=module.current_filter.field /]

	[do.@junk set='module.current_filter.sql_where']	
		1=1 
		[if.not_whitespace module.current_filter.before_date_yyyymmdd]
			 and [module.current_filter.field /] < '[module.current_filter.before_date_yyyymmdd /]'
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.to_date_yyyymmdd]
			 and [module.current_filter.field /] <= '[module.current_filter.to_date_yyyymmdd /]'
		[/if.not_whitespace] 

		[if.not_whitespace module.current_filter.after_date_yyyymmdd]
			 and [module.current_filter.field /]) > '[module.current_filter.after_date_yyyymmdd /]'
		[/if.not_whitespace] 
		[if.not_whitespace module.current_filter.from_date_yyyymmdd]
			 and [module.current_filter.field /] >= '[module.current_filter.from_date_yyyymmdd /]'
		[/if.not_whitespace]
	[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[module.set current_filter='' /]	
[/templates.add]


//** templates to build add_field **//
[templates.add add_field]
	[loop.@add_field module.add_field]
		[module.set current_field={@add_field.item} /]	
					
		[templates.add_field_meta_key true='{module.current_field.meta_key.exists}' /]	
		[templates.add_field_aw2_meta_key true='{module.current_field.aw2_meta_key.exists}' /]	

		[templates.add_field_taxonomy true='{module.current_field.taxonomy.exists}' /]
		[templates.add_field_sql true='{module.current_field.sql.exists}' /]
		[templates.add_field_field true='{module.current_field.field.exists}' /]    
					[module.set current_query_no='' /]		
	[/loop.@add_field]
[/templates.add]


[templates.add add_field_meta_key]
	[aw2.get module.current_field.meta_key set=template.meta_key /]

	[aw2.get module.current_field.id_field set=template.id_field default='post_id'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]

	[aw2.get module.current_field.meta_value_field set=template.meta_value_field default='meta_value'/]

	[aw2.get module.current_field.field set=template.field default='{template.meta_key}' /]
	[aw2.get module.current_field.table set=template.table default=wp_postmeta /]

	[aw2.get module.current_field.meta_key_field set=template.meta_key_field default='meta_key' /]
    
	[aw2.get module.current_field.ifnull set=template.ifnull/]


	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]

	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*, 
	  
      [if.not_empty template.ifnull]
      	ifnull([template.meta_value_field /],'[template.ifnull /]') as [template.field /]  
      [/if.not_empty]
      [if.else]
      	[template.meta_value_field /] as [template.field /]  
      [/if.else]
      
      from
      [module.previous_query_no /] left join [template.table /]   on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] and [template.meta_key_field /]='[template.meta_key/]' )
	[/do.@junk]
		[module.set current_field='' /]	

[/templates.add]


[templates.add add_field_aw2_meta_key]
	[aw2.get module.current_field.aw2_meta_key set=template.meta_key /]
	[aw2.get module.current_field.coll_id set=template.coll_id /]

	[aw2.get module.current_field.id_field set=template.id_field default='object_id'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]

	[aw2.get module.current_field.meta_value_field set=template.meta_value_field default='meta_value'/]

	[aw2.get module.current_field.field set=template.field default='{template.meta_key}' /]
	[aw2.get module.current_field.table set=template.table /]

	[aw2.get module.current_field.meta_key_field set=template.meta_key_field default='meta_key' /]
	[aw2.get module.current_field.ifnull set=template.ifnull/]
    
	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]

	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*,
      
      [if.not_empty template.ifnull]
      	ifnull([template.meta_value_field /],'[template.ifnull /]') as [template.field /]  
      [/if.not_empty]
      [if.else]
      	[template.meta_value_field /] as [template.field /]  
      [/if.else]
      
	  from [module.previous_query_no /] left join [template.table /]   on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] 
      			[if.not_empty template.coll_id]
			and coll_id='[template.coll_id]'
			[/if.not_empty]

      and [template.meta_key_field /]='[template.meta_key/]' 
	)		
	[/do.@junk]
		[module.set current_field='' /]	

[/templates.add]


[templates.add add_field_field]
	[aw2.get module.current_field.field set=template.field /]
	[aw2.get module.current_field.as_field set=template.as_field default='{template.field}' /]

	[aw2.get module.current_field.id_field set=template.id_field default='ID'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]

	[aw2.get module.current_field.table set=template.table default=wp_posts /]
	[aw2.get module.current_field.ifnull set=template.ifnull/]

	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]

	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*, 
      
      [if.not_empty template.ifnull]
      	ifnull([template.field /],'[template.ifnull /]') as [aw2.get template.as_field /]   
      [/if.not_empty]
      [if.else]
		  [template.field /] as [aw2.get template.as_field /] 
      [/if.else]


      from 
	  [module.previous_query_no /] left join [template.table /]
	  on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] )
	[/do.@junk]
		[module.set current_field='' /]	
[/templates.add]

[templates.add add_field_taxonomy]
	[aw2.get module.current_field.taxonomy set=template.taxonomy /]

	[aw2.get module.current_field.id_field set=template.id_field default='data_id'/]
	[aw2.get module.current_field.ref_id set=template.ref_id default='data_id'/]
	[aw2.get module.current_field.meta_value_field set=template.meta_value_field default='name'/]
	[aw2.get module.current_field.field set=template.field default='{template.taxonomy}' /]
	[aw2.get module.current_field.table set=template.table default=all_terms /]
	[aw2.get module.current_field.ifnull set=template.ifnull/]
	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]
	  [module.current_query_no /] as 
	  (
	  select [module.previous_query_no /].*, 

      [if.not_empty template.ifnull]
      	ifnull([template.meta_value_field /],'[template.ifnull /]') as [template.field /]  
      [/if.not_empty]
      [if.else]
      	[template.meta_value_field /] as [template.field /]  
      [/if.else]
      
 from 
	  [module.previous_query_no /] left join [aw2.get template.table /]
	   on 
	  [module.previous_query_no /].[template.ref_id]=[template.table /].[template.id_field /] and taxonomy='[template.taxonomy/]' )
	[/do.@junk]
		[module.set current_field='' /]	        
[/templates.add]

[templates.add add_field_sql]

	[templates.set_query_no /]
			[module.set current_query_no={module.query_no} /]
			[module.set current_query_no={@add_field.item.query_no} not_empty='{@add_field.item.query_no}'/]

	[do.@junk set=module.dataset.field_query.new]
		[module.current_query_no /] as 
		(
		[code.run module.current_field.sql /]
		 )
	[/do.@junk]
		[module.set current_field='' /]			
[/templates.add]


//** templates to build q0 **//
[templates.add q0]

		[module.set current_query_no='q0' /]
		[module.set current_query_no={module.with.query_no} not_empty='{module.with.query_no}'/]
	
	with [module.current_query_no /] as (	
	  [templates.q0_sql not_empty='{module.with.sql}' /]	
	  [templates.q0_published_posts not_empty='{module.with.published_posts}' /]	
	  [templates.q0_aw2_filter_query not_empty='{module.with.aw2_filter_query}' /]	
	)
[/templates.add]

[templates.add q0_sql]
	[do.@i]
		[module.with.sql /]
	[/do.@i]
[/templates.add]

[templates.add q0_published_posts]
	[do.@i]
		Select ID as data_id from wp_posts where post_type='[module.with.published_posts.post_type /]' and post_status='publish'
	[/do.@i]
[/templates.add]

[templates.add q0_aw2_filter_query]
	[do.@i]
	  SELECT
	  object_id AS data_id
			[if.not_empty module.with.aw2_filter_query.select_fields]
			,[module.get with.aw2_filter_query.select_fields]
			[/if.not_empty]
	  FROM [module.get with.aw2_filter_query.table /] as d1
	  WHERE
	  1=1
	  [templates.aw2_where_clauses where='{module.with.aw2_filter_query.where}'/]
	[/do.@i]
[/templates.add]

[templates.add aw2_where_clauses]
  [loop.@i template.where]
	[template.set wheres.new]
	  [aw2.switch]
		[aw2.case cond="{@i.item.data_type}" equal="period"]
		  
          [date.aw2_period period="{@i.item.value}" set=template.select_period_arr/]

		  AND DATE([aw2.get @i.item.column /]) <= DATE([template.get select_period_arr.end_date /])
		  AND DATE([aw2.get @i.item.column /]) >= DATE([template.get select_period_arr.start_date /])
		[/aw2.case]

		[aw2.case not_empty="{@i.item.column}"]
		  AND [templates.apply_operator where={@i.item} /]
		[/aw2.case]

		[aw2.case not_empty="{@i.item.sql}"]
		  [aw2.get @i.item.sql /]
		[/aw2.case]

	  [/aw2.switch]
	[/template.set]
  [/loop.@i]

  [template.return template.wheres.space /]
[/templates.add]




//** templates for apply operators **//
[templates.add apply_operator]
		[template.set where.operator="{template.where.operator}" default='in' /]
		[template.set where.data_type="{template.where.data_type}" default='string' /]

		[templates.basic_operator list='lt,gt,lte,gte,eq,neq' contains='{template.where.operator}' where='{template.where}'/]

		[templates.whitespace_operator list='whitespace' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.not_whitespace_operator list='not_whitespace' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.null_operator list='null,not_null' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.like_operator list='like,not_like' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.in_operator list='in,not_in' contains='{template.where.operator}' where='{template.where}'/]	
		[templates.exists_operator list='exists' contains='{template.where.operator}' where='{template.where}'/]	
[/templates.add]

[templates.add basic_operator]

  [if.contains needle="{template.where.data_type}" haystack="string,number"]
	[template.where.column /]
  [/if.contains]
  [if.contains needle="{template.where.data_type}" haystack="date"]
	DATE([template.where.column /])
  [/if.contains]

  [if.equal lhs='{template.where.operator}' rhs='lt']<[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='gt']>[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='lte']<=[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='gte']>=[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='eq']=[/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='neq']<>[/if.equal]

	[if.contains needle="{template.where.data_type}" haystack="string"]
	[esc.str template.where.value /]
  [/if.contains]

	[if.contains needle="{template.where.data_type}" haystack="number"]
	[esc.num template.where.value /]
  [/if.contains]

  [if.contains needle="{template.where.data_type}" haystack="date"]
	DATE([esc.str template.where.value /])
  [/if.contains]

[/templates.add]

[templates.add like_operator]
  [template.where.column /]

  [if.equal lhs='{template.where.operator}' rhs='like'] LIKE [/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='not_like'] NOT LIKE [/if.equal]

	'%[esc.like template.where.value /]%'

[/templates.add]

[templates.add null_operator]
  [template.where.column /]

  [if.equal lhs='{template.where.operator}' rhs='null'] IS NULL [/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='not_null'] IS NOT NULL [/if.equal]
[/templates.add]


[templates.add whitespace_operator]
(
  [template.where.column /]
  [if.equal lhs='{template.where.operator}' rhs='whitespace'] IS NULL [/if.equal]
or
  TRIM([template.where.column /])
  [if.equal lhs='{template.where.operator}' rhs='whitespace'] = '' [/if.equal]
)
[/templates.add]

[templates.add not_whitespace_operator]
(
  [template.where.column /]
	[if.equal lhs='{template.where.operator}' rhs='not_whitespace'] IS NOT NULL [/if.equal]

and

  TRIM([template.where.column /])
	[if.equal lhs='{template.where.operator}' rhs='not_whitespace'] <> '' [/if.equal]
)

[/templates.add]

[templates.add in_operator]
  [if.equal lhs='{template.where.operator}' rhs='in'] [/if.equal]
	[if.equal lhs='{template.where.operator}' rhs='not_in'] NOT [/if.equal]


	[template.where.column /] in (

		
		[if.contains needle="{template.where.data_type}" haystack="string"]
			[template.get where.value.comma o.set=template.s_array/]
			[loop.@i template.s_array]
				[esc.in @i.item /]
				[if.true @i.between],[/if.true]
			[/loop.@i]
		[/if.contains]

		[if.contains needle="{template.where.data_type}" haystack="number"]
			[template.get where.value.comma o.set=template.s_array/]
			[loop.@i template.s_array]
				[esc.in @i.item /]
				[if.true @i.between],[/if.true]
			[/loop.@i]
		[/if.contains]
	
	)
[/templates.add]


[templates.add exists_operator]
	1=1
[/templates.add]


[templates.add filter_period_backup]
	[if.not_whitespace module.current_filter.period]
		[module.current_filter.field set=module.current_filter.field /]
		[module.current_filter.period set=module.current_filter.period default='day'/]
		[module.current_filter.which set=module.current_filter.which default=0 /]

		[do.@junk set='module.current_filter.sql_where']	
			[if.equal lhs='{module.current_filter.period}' rhs='day']
				[module.set current_filter.which=0 cond='{module.current_filter.which}' equal='today'/]
				[module.set current_filter.which=1 cond='{module.current_filter.which}' equal='yesterday'/]
					date([module.current_filter.field]) = CURDATE() - INTERVAL [module.current_filter.which/] DAY
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='days']
					date([module.current_filter.field]) >= CURDATE() - INTERVAL [module.current_filter.which/] DAY
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='month']
				[module.set current_filter.which=0 cond='{module.current_filter.which}' equal='this_month'/]
				[module.set current_filter.which=1 cond='{module.current_filter.which}' equal='last_month'/]
					month([module.current_filter.field])=month(DATE_FORMAT(CURDATE(), '%Y-%m-01')-interval [module.current_filter.which/] month) and
					year([module.current_filter.field])=year(DATE_FORMAT(CURDATE(), '%Y-%m-01')-interval [module.current_filter.which/] month)
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='months']
					date([module.current_filter.field]) >= DATE_FORMAT(CURDATE(), '%Y-%m-01')-interval ([module.current_filter.which/] - 1) month
			[/if.equal] 

			[if.equal lhs='{module.current_filter.period}' rhs='year']
				[module.set current_filter.which=0 cond='{module.current_filter.which}' equal='this_year'/]
				[module.set current_filter.which=1 cond='{module.current_filter.which}' equal='this_year'/]
					YEAR([module.current_filter.field]) = YEAR(CURDATE()) - [module.current_filter.which/]
			[/if.equal] 
		[/do.@junk]

	[templates.set_query_no /]
		[do.@junk set=module.dataset.filter_query.new]
	[module.query_no /] as 
		(
		select [module.previous_query_no /].* from [module.previous_query_no /] 
					where 
			[module.current_filter.sql_where]
		)
  [/do.@junk]

	[/if.not_whitespace] 
	[module.set current_filter='' /]	
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>906322</wp:post_id>
		<wp:post_date><![CDATA[2019-10-18 03:15:01]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2019-10-18 03:15:01]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[meta_query2]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[db_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							</item>
						<item>
		<title>error-log</title>
		<link>https://awxdocs.com/?post_type=aw2_app&#038;p=881509</link>
		<pubDate>Mon, 01 Feb 2021 05:38:59 +0000</pubDate>
		<dc:creator><![CDATA[amit]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=aw2_app&#038;p=881509</guid>
		<description></description>
		<content:encoded><![CDATA[]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>881509</wp:post_id>
		<wp:post_date><![CDATA[2021-02-01 05:38:59]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2021-02-01 05:38:59]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[error-log]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[aw2_app]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_lock]]></wp:meta_key>
		<wp:meta_value><![CDATA[1612159686:3]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[2]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[config_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[c-errlog-app]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[modules_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[m-errlog-app]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[pages_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[p-errlog-app]]></wp:meta_value>
		</wp:postmeta>
							</item>
		
			
		<item>
		<title>layout</title>
		<link>https://awxdocs.com/?post_type=c-errlog-app&#038;p=1230948</link>
		<pubDate>Fri, 29 Jan 2021 12:27:30 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://uat.loantap.in/?post_type=c-errlog-app&#038;p=1230948</guid>
		<description></description>
		<content:encoded><![CDATA[[backend_design.layout /]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>1230948</wp:post_id>
		<wp:post_date><![CDATA[2021-01-29 12:27:30]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2021-01-29 12:27:30]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[layout]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[c-errlog-app]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[2]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_lock]]></wp:meta_key>
		<wp:meta_value><![CDATA[1613124270:2]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title>home</title>
		<link>https://awxdocs.com/?post_type=m-errlog-app&#038;p=1230953</link>
		<pubDate>Fri, 29 Jan 2021 12:31:54 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://uat.loantap.in/?post_type=m-errlog-app&#038;p=1230953</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add conf]
	[template.set db_name='awesome_exceptions' /]
  [template.return template.db_name /]
[/templates.add]

[templates.conf o.set=module.db_name/]

[templates.add main]
[env.set app.page_title="Error Log - {{wp.get option.blogname}}" /]
<style>
.listbt{
    border: 1px solid #ccc;
    cursor: pointer;
    padding: 3px;
    min-width:24px;
    min-height:22px;
    display: inline-block;
    text-align:center;
}
.listbt:hover{
	 opacity: 0.5;
}
.collapse.in {
    display: none;
}
body .collapse.show{
	display:block;
}
.table tbody tr:hover{
background: #eee;
}
</style>

	[modules.ui.menu mod='{module.slug}'/]
    
  [mysqli.fetch.rows o.set=template.status_options_data]
		 SELECT CONCAT(status, " (", count(1), ")")  as  label,status as value FROM [module.db_name/] group by status
 	[/mysqli.fetch.rows]
  [template.status_options_data.rows o.set=template.status_options/]
  
  
   
   [mysqli.fetch.rows o.set=template.exception_type_options_data]
		 SELECT CONCAT(exception_type, " (", count(1), ")")  as label,exception_type as value FROM [module.db_name/] group by exception_type
 	[/mysqli.fetch.rows]
  [template.exception_type_options_data.rows o.set=template.exception_type_options/]
    
     
    
	
   [mysqli.fetch.rows o.set=template.tbl]
		SELECT status,count(1) as total FROM [module.db_name/] group by status
 	[/mysqli.fetch.rows]
  
  
  [template.set_array tbl.column.new label="Status" meta_key="status"/]
	[template.set_array tbl.column.new label="Total" meta_key="total"/]
 [template.set tbl.class="table-bordered font-size-smallest brand-white-bg" /] 
 [modules.ui.table args="{template.tbl}" o.set=template.tbl_html /] 

   [mysqli.fetch.rows o.set=template.app_name_options_data]
		 SELECT CONCAT(post_type , " (", count(1), ")")  as label,post_type  as value FROM [module.db_name/]  where post_type !='' group by post_type 
 	[/mysqli.fetch.rows]
  [template.app_name_options_data.rows o.set=template.app_name_options/]
    
  [mysqli.fetch.rows o.set=template.number_of_time_data]
		 SELECT CONCAT(no_of_times , " (", count(1), ")") as label,no_of_times  as value FROM [module.db_name/]  group by no_of_times 
 	[/mysqli.fetch.rows]
  [template.number_of_time_data.rows o.set=template.number_of_time_options/]
  
  
  [template.set_array order_options.new label="created_date ASC" value="created_date ASC"/]
  [template.set_array order_options.new label="created_date DESC" value="created_date DESC"/]
  [template.set_array order_options.new label="modified_date ASC" value="modified_date ASC"/]
  [template.set_array order_options.new label="modified_date DESC" value="modified_date DESC"/]
  [template.set_array order_options.new label="no_of_times ASC" value="no_of_times ASC"/]
  [template.set_array order_options.new label="no_of_times DESC" value="no_of_times DESC"/]
   [template.set_array order_options.new label="ID ASC" value="id ASC"/]
  [template.set_array order_options.new label="ID DESC" value="id DESC"/]
    
    
  [mysqli.fetch.row o.set=template.raw]
		SELECT * FROM [module.db_name/] limit 1	
 	[/mysqli.fetch.row]

    [module.set_array args]
        [atts mod='{module.slug}'/]    
          [handlers]
              [fasttable handler=datatable label="<i class='fa fa-check'></i> Fast(300)" max_count=300][/fasttable]
              [datatable label="<i class='fa fa-table'></i> All Data (Slow)"]
              	[bulk_action bulk_delete label='Bulk Delete Issues' post_type="{module.collection.post_type}" module="{module.slug}" template="delete_issues "/]	 
                [bulk_action bulk_markdone label='Bulk Mark Done' post_type="{module.collection.post_type}" module="{module.slug}" template="mark_done_issues "/]	 
                [bulk_action bulk_reopen label='Bulk Reopen' post_type="{module.collection.post_type}" module="{module.slug}" template="bulk_reopen "/]
              [/datatable]
              [csv label="<i class='fa fa-download'></i> Download CSV" filename='reconcile.csv'][/csv]
          [/handlers]       
          [sections]
          [filter2 title="Search Filters" open="no"]
		        	[html] 
              		<div class="col-md-4">
			          		[form_control.text id="error_code" label='Error code' /]
			            </div>
              [/html]
		        [/filter2]
           [custom title="Filters" open="yes"]
		        	[html]
			          	<div class="col-md-4">
			          		[form_control.select id="status" label='Status'  options_array="{template.status_options}"/]
			            </div>
                  <div class="col-md-4">
			          		[form_control.select id="exception_type" label='Exception Type'  options_array="{template.exception_type_options}" multiple='yes'/]
			            </div>
                   
                  <div class="col-md-4">
			          		[form_control.select id="app_name" label='App Name'  options_array="{template.app_name_options}" multiple='yes'/]
			            </div>               
                  
                  <div class="col-md-4">
			          		[form_control.select id="number_of_time" label='Error Hit Count'  options_array="{template.number_of_time_options}" multiple='no'/]
			            </div>
		          [/html]
		        [/custom]
            
            [ordering title="Ordering" open="yes"]
		        	[html] 
              		<div class="col-md-4">
			          		[form_control.select id="order_1" label='Order 1'  options_array="{template.order_options}" multiple='no'/]
                  </div> 
                  <div class="col-md-4">
                    [form_control.select id="order_2" label='Order 2'  options_array="{template.order_options}" multiple='no'/]
                     </div>
                     <div class="col-md-4">
                     [form_control.select id="order_3" label='Order 3'  options_array="{template.order_options}" multiple='no'/]
			            </div>
              [/html]
		        [/ordering]
				[/sections]
    [/module.set_array]


[module.set_raw temp_column]
[column new label='ID' meta_key='data_id'  /]
  [column new label='Action']
                [calc raw]
                <ul class='no-padding' style='min-width:100px;'>
                
                        <li class='inline'>
                 	<a href="[env.app.path/]/single-error/[env.row.ID /]" class='listbt brand-info-bg brand-white' target="_blank" rel="noopener" title='View Bug Details'><i class='fa fa-eye brand-white'></i> </a>  </li>
                
                
                  <li class='inline'> <a href="javascript::void(0);" class='listbt brand-warning-bg brand-white' data-confirmation="Are you sure You want to trash this issue" axn='route.run' bind='click' route_ajax='[env.search.mod /].update_status' data-pid="[env.row.ID /]" data-do_act="trash" title='Delete Error'><i class="fa fa-trash brand-white"></i> </a>
                 </li>
         
                
                
                  [if.equal lhs="{env.row.status}" rhs="Done"]
                   <li class='inline'><a href="javascript::void(0);" class="listbt brand-primary-bg brand-white" data-confirmation="Are you sure You want re-Open this issue" axn='route.run' bind='click' route_ajax='[env.search.mod /].update_status' data-pid="[env.row.ID /]" data-do_act="reopen" title='Re-Open This Issue'><i class="fa fa-folder-open brand-white" aria-hidden="true"></i></a> </li>
                  [/if.equal]
                 
                   [if.not_equal lhs="{env.row.status}" rhs="Done"]
                   <li class='inline'>
                   <a href="javascript::void(0);" class='listbt brand-success-bg brand-white' data-confirmation="Are you sure You want to mask this issue as Resloved " axn='route.run' bind='click' route_ajax='[env.search.mod /].update_status' data-pid="[env.row.ID /]" data-do_act="done" title='Mark As Done'><i class='fa fa-check brand-white'></i></a>  </li>
                   [/if.not_equal]
                
                  </ul>
                   
                [/calc]
            [/column]
            
        
[/module.set_raw]


[module.set_raw temp_filter]
 [filter new not_empty="{form_data.status}"]
    [sql raw]
      select pquery.* from [esc.table module.previous_query_no /] AS pquery WHERE status='[env.form_data.status/]' 
   [/sql]
 [/filter]
 [filter new not_empty="{form_data.exception_type}"]
    [sql raw]
      select pquery.* from [esc.table module.previous_query_no /] AS pquery WHERE exception_type in ([env.form_data.exception_type.comma.quote_comma/])
   [/sql]
 [/filter]
 
  [filter new not_empty="{form_data.error_code}"]
    [sql raw]
      select pquery.* from [esc.table module.previous_query_no /] AS pquery WHERE id ="[env.form_data.error_code/]"
   [/sql]
 [/filter]
 
   [filter new not_empty="{form_data.app_name}"]
    [sql raw]
      select pquery.* from [esc.table module.previous_query_no /] AS pquery WHERE post_type in ([env.form_data.app_name.comma.quote_comma/])
   [/sql]
 [/filter]
 
    [filter new not_empty="{form_data.number_of_time}"]
    [sql raw]
      select pquery.* from [esc.table module.previous_query_no /] AS pquery WHERE number_of_time = "[env.form_data.number_of_time/]"
   [/sql]
 [/filter]
[/module.set_raw]

[module.set_raw call_stack]
	[column new label='call_stack']
		 [calc raw]
     	<div style='width:400px;word-wrap: anywhere;'>
     		[env.row.call_stack /]
      </div>
   		[/calc]
 [/column]	
[/module.set_raw]

[module.set_raw call_id]
	[column new label='id']
		 [calc raw]     
     		<a href="[env.app.path/]/single-error/[env.row.ID /]" target="_blank" rel="noopener">[env.row.ID /]</a>      
   		[/calc]
 [/column]	
[/module.set_raw]


[module.set_raw order]
	[order not_empty="{form_data.order_1}{form_data.order_2}{form_data.order_3}"]
     [do.@i]
        [env.form_data.order_1 o.set=form_data.order_str.new c.not_empty="env.form_data.order_1"/]
        [env.form_data.order_2 o.set=form_data.order_str.new c.not_empty="env.form_data.order_2"/]
        [env.form_data.order_3 o.set=form_data.order_str.new c.not_empty="env.form_data.order_3"/]   
        [env.form_data.order_str.comma not_empty="{form_data.order_str.count}"/]
     [/do.@i]
 [/order]
[/module.set_raw]


    [module.set args.after_submit]
        [query]  
        
          [pagesize]100[/pagesize]         
            [with]
               [sql]
                  SELECT *, id as data_id FROM [module.db_name/]  
                [/sql]  
                [module.temp_filter/]           
            [/with]     
           [module.order/]
	
        [/query]
        [table]
            [module.temp_column/]
            [loop.@a template.raw.row]     
             
              [aw2.switch]
              [aw2.case cond='{@a.key}' equal='ID']  
                	[module.call_id /]            
                [/aw2.case]   
                [aw2.case cond='{@a.key}' equal='call_stack']  
                	[module.call_stack /]            
                [/aw2.case]                
                [aw2.case_else]
                 [column new label='[env.@a.key/]' meta_key='[env.@a.key/]'/]
                [/aw2.case_else]
              [/aw2.switch]                
            [/loop.@a]    
          
        [/table]
    [/module.set]



     [do.@build_page]    
         <div class='gap-2'></div>
          <h2 class='text-center'>Awesome Exceptions</h2>
          <div class='gap-2'></div>
          [template.tbl_html/]
          [template.html/]
          [search2.views args={module.args}/]
    [/do.@build_page]  
    
  
[/templates.add]


[templates.add update_status]
	[template.set req="{request2}"/]
  [template.return service="modules.ui.trusted_spamsg" msg="Error Id is empty {template.req.pid}" c.empty=template.req.pid/]
  
  [template.set status="Done" /]
  [template.set status="active" c.cond=template.req.do_act c.eq="s:reopen"/]
   
  [aw2.switch]
    [aw2.case cond='{template.req.do_act}' equal='trash']  
      [mysqli.cud o.set=template.raw]
        delete from [module.db_name/] where ID='[template.req.pid/]';
      [/mysqli.cud]
      [template.set msg="{template.req.pid} issue is trashed"/]   
      <script type=spa/axn axn='core.run_script'>
       $("#fasttable").trigger( "click" );
      </script>
      [if.equal lhs='{template.req.reload}' rhs='yes']
      	[template.return service="modules.ui.trusted_spamsg" msg="{template.req.pid} Error deleted" msg_type="success" url=""/] 
      [/if.equal]
      
    [/aw2.case]                
    [aw2.case_else]
     [mysqli.cud o.set=template.raw]
        update [module.db_name/] set status='[template.status/]' where ID='[template.req.pid/]';
      [/mysqli.cud]
      [template.set msg="Status updated for  {template.req.pid}"/] 
      [template.return service="modules.ui.trusted_spamsg" msg="{template.msg}" msg_type="success" url=""/] 
    [/aw2.case_else]
  [/aw2.switch]     

[/templates.add]


[templates.add delete_issues]
	[template.set req='{request}'/]
	//****getting sublan_ids from request***//
    [template.set ids="{template.req.selected_data}"/]   
        
     [template.return content empty="{template.ids}"]
    	 <script type="spa/axn" axn="core.run_script" alert="Select atleast one entry " data-safe_id='[app.safe_id /]'></script>
    [/template.return]
    
    [mysqli.multi.cud o.set=template.data]
      Delete from [module.db_name/] where id in ([template.ids.comma.quote_comma/]);
    [/mysqli.multi.cud] 
      
     [template.return content]
    	 <script type="spa/axn" axn="core.run_script" alert="Yahoo, selected entries deleted" data-safe_id='[app.safe_id /]'>
       $("#[template.req.submit_handler/]").trigger( "click" );
       </script>
    [/template.return]    
    
[/templates.add]

[templates.add mark_done_issues]

	[template.set req='{request}'/]
	//****getting sublan_ids from request***//
    [template.set ids="{template.req.selected_data}"/]   
        
     [template.return content empty="{template.ids}"]
    	 <script type="spa/axn" axn="core.run_script" alert="Select atleast one entry" data-safe_id='[app.safe_id /]'></script>
    [/template.return]
    
    [mysqli.multi.cud o.set=template.data]
      update [module.db_name/] set status='Done' where id in ([template.ids.comma.quote_comma/]);
    [/mysqli.multi.cud] 
      
     [template.return content]
    	 <script type="spa/axn" axn="core.run_script" alert="Yahoo, selected entries updated" data-safe_id='[app.safe_id /]'>
       $("#[template.req.submit_handler/]").trigger( "click" );
       </script>
    [/template.return]    
    
[/templates.add]

[templates.add bulk_reopen]
	[template.set req='{request}'/]
	//****getting sublan_ids from request***//
    [template.set ids="{template.req.selected_data}"/]   
    
    [template.return content empty="{template.ids}"]
    	 <script type="spa/axn" axn="core.run_script" alert="Select atleast one entry" data-safe_id='[app.safe_id /]'></script>
    [/template.return]
    
     
    [mysqli.multi.cud o.set=template.data]
      update [module.db_name/] set status='active' where id in ([template.ids.comma.quote_comma/]);
    [/mysqli.multi.cud] 
    
    [template.return content]
    	 <script type="spa/axn" axn="core.run_script" alert="Yahoo, selected entries updated" data-safe_id='[app.safe_id /]'>
       $("#[template.req.submit_handler/]").trigger( "click" );
       </script>
    [/template.return]    
[/templates.add]
]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>1230953</wp:post_id>
		<wp:post_date><![CDATA[2021-01-29 12:31:54]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2021-01-29 12:31:54]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[home]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m-errlog-app]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_lock]]></wp:meta_key>
		<wp:meta_value><![CDATA[1613622365:3]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title>ui</title>
		<link>https://awxdocs.com/?post_type=m-errlog-app&#038;p=1230959</link>
		<pubDate>Fri, 29 Jan 2021 12:36:18 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://uat.loantap.in/?post_type=m-errlog-app&#038;p=1230959</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add menu]

[if.not_empty template.mod]
<div class='gap-3'></div>
       	<div class='text-center'>
        <a href="[env.app.path/]" class='btn btn-success'><i class='fa fa-home'></i> Home</a>
        <a href='[env.app.path/]/z/[module.mod/]' target="_blank" class='btn btn-warning' rel="noopener"><i class='fa fa-edit'></i> Edit Module</a></div>
[/if.not_empty]
[/templates.add]

[templates.add alert]

	
	[template.set msg_type="danger" empty="{template.msg_type}"/]  
    [template.set msg_type="danger" list="error,fatal_error" contains="{template.msg_type}"/]    
    [template.set class="success" icon="fa-check " cond="{template.msg_type}" equal="success"/]
    [template.set class="danger" icon="fa-times-circle " cond="{template.msg_type}" equal="danger"/]  
    [template.set class="info" icon="fa-info-circle " cond="{template.msg_type}" equal="info"/] 
    [template.set class="warning" icon="fa-warning " cond="{template.msg_type}" equal="warning"/]

    [template.set html]
      <div class='alert alert-[template.class/] alert-white rounded'>
        [if.equal lhs="{template.close}" rhs="yes"]
          <button type='button' data-dismiss='alert' aria-hidden='true' class='close'>×</button> 
        [/if.equal]
        <div class='icon_box'>
          <i class='icon [template.icon /] '></i>
        </div>
        <div class='msg_box'>[template.msg /]</div>
      </div>
    [/template.set]
  
  [template.return template.html /]
[/templates.add]


[templates.add trusted_spamsg]	      
	[if.not_empty template.msg]
       [template.set alert]data-alert="[template.msg/]"[/template.set]
  [/if.not_empty]
    
  [template.set axn]axn="core.run_script"[/template.set]      	
  
 	[template.set axn c.exists='template.url']axn="core.redirect" data-url="[template.url/]"[/template.set]  
  
    [html.trusted]
         <template data-safe_id="[app.safe_id/]" type=spa/axn  [template.axn/] [template.alert/] ></template>
    [/html.trusted]    
[/templates.add] 

[templates.add trusted_msg]
  [html.trusted]
   	[templates.alert msg="{template.msg}" msg_type="{template.msg_type}"/]
  [/html.trusted]  
[/templates.add] 



[templates.add table]
  [template.args o.set=module.args/]
   
  [templates.alert msg="No Data Found!!" msg_type="info" set=template.msg/]
  [template.return template.msg cond={module.args.rows.count} equal='0'/]

  [module.set column = {module.args.column} /]
  
  

  <table class="table [module.args.class/]" cellpadding="0" cellspacing="0">
    <thead class="[module.args.head_class/]">
      
      [loop.@column module.column]
        <th style='[env.@column.item.style /]'>
          [aw2.get @column.item.label /]
        </th>
      [/loop.@column]
    </thead>
    <tbody>
  	[loop.@rows module.args.rows]
  	  [aw2.get @rows.item set=row /]
  	  [aw2.get @rows.index set=row.@index /]
  	  <tr>
     
       [loop.@column module.column]
            <td>
                [aw2.get row.{@column.item.meta_key} c.not_empty='@column.item.meta_key'/]
                [aw2.get @column.item.calc.run c.not_empty='@column.item.calc' /]
            </td>
        [/loop.@column]	    
      </tr>
  	[/loop.@rows]
     </tbody>   
  </table>

[/templates.add]


[templates.add fieldset]
[module.set unique_id="{unique_number}"/]

[module.get icon_open default="fa-minus-square" set=template.icon_open /]
[module.get icon_close default="fa-plus-square" set=template.icon_close /]
[template.open default="yes" set=template.open/]

[template.set default_icon="{template.icon_close}"/]
[template.set default_icon="{template.icon_open}" cond="{template.open}" equal="yes"/]

[template.set elclass="closed"/]
[template.set elclass="opened"  cond="{template.open}" equal="yes"/]


[template.toggle default="yes" set=template.toggle/]

[if.equal lhs="{template.toggle}" rhs="yes"]
	[template.set hide_style="display:none;" cond="{template.open}" equal="no"/]
[/if.equal]
[template.set block_title][if.equal lhs="{template.toggle}" rhs="yes"]<i class="fa [template.default_icon/] icon-on-pannel"></i>[/if.equal] [template.fieldset_title/][/template.set]




<section role="fieldset" >
  <div class="panel panel-primary fieldset_panel  [template.fieldset_class/]">
      <div class="panel-body fieldset_body">
        <h3 class="text-on-pannel text-primary [template.label_class default='brand-white-bg'/] toggler [template.elclass/]" id="[module.unique_id/]"><strong class="text-uppercase">[template.block_title/]</strong></h3>
        [if.not_empty template.fieldset_body]
        <div role="fieldset_body" style="[template.hide_style /]">
        	<div class="gap-6"></div>
        	[template.fieldset_body/] 
        </div>
         [/if.not_empty]
      </div>
  </div>
</section>

[if.equal lhs="{template.toggle}" rhs="yes"]
   <script type=spa/axn axn='core.run_script' bind='click' bind_selector='#[module.unique_id/]' >
   
      parent_block=o.block.trigger.parents('[role=fieldset]').first();
      o.block.trigger.toggleClass("opened closed");
      $(parent_block).find(".fieldset_panel").first().toggleClass("hideme");
      $(parent_block).find("[role=fieldset_body]").first().slideToggle();
      o.block.trigger.find(".icon-on-pannel").toggleClass("[template.icon_open/] [template.icon_close/] ");
    </script>
 [/if.equal] 
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>1230959</wp:post_id>
		<wp:post_date><![CDATA[2021-01-29 12:36:18]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2021-01-29 12:36:18]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[ui]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m-errlog-app]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_lock]]></wp:meta_key>
		<wp:meta_value><![CDATA[1612234184:2]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title>single-error</title>
		<link>https://awxdocs.com/?post_type=m-errlog-app&#038;p=1231046</link>
		<pubDate>Sat, 30 Jan 2021 11:00:46 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://uat.loantap.in/?post_type=m-errlog-app&#038;p=1231046</guid>
		<description></description>
		<content:encoded><![CDATA[[modules.home.conf  o.set=module.db_name/]

[templates.add main]
	[modules.ui.menu mod='{module.slug}'/]
	[template.set err_id='{qs.0}'/]
  
  [template.return service="modules.ui.trusted_msg" msg="Error Id is required!" c.empty=template.err_id/]
  
	[mysqli.fetch.row o.set=template.data]
		select * from [module.db_name/] where ID="[template.err_id/]"
  [/mysqli.fetch.row]
   [env.set app.page_title="Error Number {template.err_id} - {{wp.get option.blogname}}" /]
  [template.data.row o.set=module.data/]
  
    [template.return service="modules.ui.trusted_msg" msg="Error Id Not Found!" c.empty=module.data/]
  
  [templates.actions /]
  [module.data.dump o.set=template.debug_html/]
[modules.ui.fieldset fieldset_title="Data Row" fieldset_body="{template.debug_html}" open="no" /]
  <div class='gap-1'></div>

  [templates.block_11 /]
	[templates.block_1 /]
  [templates.block_2/]
   [templates.block_22/]
  [templates.block_3/]
[/templates.add]

[templates.add actions]
<hr>
<div class='text-right'>
 [if.equal lhs="{module.data.status}" rhs="Done"]
                   <button class="btn btn-danger" data-confirmation="Are you sure You want re-Open this issue" axn='route.run' bind='click' route_ajax='home.update_status' data-pid="[module.data.ID /]" data-do_act="reopen"><i class='fa fa-refresh'></i> Re-Open</button> 
                  [/if.equal]
                 
                   [if.not_equal lhs="{module.data.status}" rhs="Done"]
                   <button class="btn btn-success" data-confirmation="Are you sure You want to mask this issue as Resloved " axn='route.run' bind='click' route_ajax='home.update_status' data-pid="[module.data.ID /]" data-do_act="done"><i class='fa fa-check'></i> Mark Done</button>  
                   [/if.not_equal]
               
                   <button class="btn btn-warning" data-confirmation="Are you sure You want to trash this issue" axn='route.run' bind='click' route_ajax='home.update_status' data-pid="[module.data.ID /]" data-do_act="trash" data-reload="yes"><i class="fa fa-trash"></i> Delete</button>
                   </div>
[/templates.add]


[templates.add block_11]
	[module.data o.set=template.table.rows.new /]  
  [template.set_array table.column.new label="ID" meta_key="ID"/]  
  [template.set_array table.column.new label="Status" meta_key="status"/]
  [template.set_array table.column.new label="Message" meta_key="message"/]
  [template.set_array table.column.new label="Module URL" meta_key="link"/]
	[template.set table.class="table-bordered font-size-smallest brand-white-bg" /] 
	[modules.ui.table args="{template.table}" set=template.html /] 
  <h5>Basic Details:</h5>
	[template.html /]	
[/templates.add]

[templates.add block_1]
	[module.data o.set=template.table.rows.new /]  
 
 [template.set_array table.column.new label="Exception Type" meta_key="exception_type"/] 
  [template.set_array table.column.new label="Created Date" meta_key="created_date"/]
  [template.set_array table.column.new label="Modified Date" meta_key="modified_date"/]
  [template.set_array table.column.new label="User" meta_key="user"/]

  
	[template.set table.class="table-bordered font-size-smallest brand-white-bg" /] 
	[modules.ui.table dataset="{template.table}" args="{template.table}" set=template.html /] 
  <h5>User Details:</h5>
	[template.html /]	
[/templates.add]

[templates.add block_2]
	[module.data o.set=template.table.rows.new /]
  
  [template.set_array table.column.new label="No of Times" meta_key="no_of_times"/]
  [template.set_array table.column.new label="errno" meta_key="errno"/]
  [template.set_array table.column.new label="Module Name" meta_key="module"/] 
  [template.set_array table.column.new label="App Name" meta_key="app_name"/]
  [template.set_array table.column.new label="Post Type" meta_key="post_type"/]
  [template.set_array table.column.new label="Location" meta_key="location"/]
  
  
	[template.set table.class="table-bordered font-size-smallest brand-white-bg" /] 
	[modules.ui.table args="{template.table}" set=template.html /] 
  <h5>Location Details:</h5>
	[template.html /]	
[/templates.add]

[templates.add block_22]

	<h5>Request Details:</h5>
  <table class="table table-bordered font-size-smallest brand-white-bg" cellspacing="0" cellpadding="0">
   <tr>
    	<th>request_url</th>
      <td>[module.data.request_url/]</td>
    </tr>
    <tr>
    	<th>request_data</th>
      <td>[module.data.request_data.json_decode.dump/]</td>
    </tr>
    <tr>
    	<th>header_data</th>
      <td>[module.data.header_data.json_decode.dump/]</td>
    </tr>
    
 
    </table>
  
  
    
[/templates.add]


[templates.add block_3]
	<h5>Debug Data:</h5>
  <table class="table table-bordered font-size-smallest brand-white-bg" cellspacing="0" cellpadding="0">

       <tr>
    	<th>errfile</th>
      <td>[module.data.errfile/]</td>
    </tr>
    <tr>
    	<th>errline</th>
      <td>[module.data.errline/]</td>
    </tr>
    <tr>
    	<th>sql_query</th>
      <td>[module.data.sql_query/]</td>
    </tr>
     <tr>
    	<th>Shortcode</th>
      <td>[module.data.sc/]</td>
    </tr>
    <tr>
    	<th>call_stack</th>
      <td>[module.data.call_stack.json_decode.dump/]</td>
    </tr>
     <tr>
    	<th>trace</th>
      <td><pre>[module.data.trace/]</pre></td>
    </tr>
    </table>
[/templates.add]
]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>1231046</wp:post_id>
		<wp:post_date><![CDATA[2021-01-30 11:00:46]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2021-01-30 11:00:46]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[single-error]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m-errlog-app]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_wp_old_slug]]></wp:meta_key>
		<wp:meta_value><![CDATA[single-error-check]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_lock]]></wp:meta_key>
		<wp:meta_value><![CDATA[1613105214:2]]></wp:meta_value>
		</wp:postmeta>
							</item>
			
					<item>
		<title>activity-submit</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673957</link>
		<pubDate>Sat, 17 Nov 2018 05:35:09 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670714</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

  [do.search]
  	[module.set args={module.json_args.json_decode} /]
    [module.args merge_with=search /]
    [do.form_data]
		[module.set form_data={module.json_form_data.json_decode} /]
		[module.form_data merge_with=form_data /]

      
      //** Handle after submit to prevent earlier parsing**//  
      
      [arr.create merge_with=search]
      //** This do is an array do **//  
        [do]
      	  [aw2.get search.after_submit /]
    	 [/do]
      [/arr.create]
      [module.set activity_handler={module.json_handler.json_decode} /]
      
      [modules.run {module.activity_handler.module} handler="{module.activity_handler}" c.empty='module.activity_handler.template' /]
      [modules.run {module.activity_handler.template} module='{module.activity_handler.module}' handler="{module.activity_handler}" c.not_empty='module.activity_handler.template' /]
      
    [/do.form_data]
        
  [/do.search]
    
[/templates.add]
]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673957</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:35:09]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:35:09]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[activity-submit]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>dashboard</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673958</link>
		<pubDate>Sat, 17 Nov 2018 05:35:50 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670716</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
	[html.trusted]
  	<template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
      [loop.@widget search.widget]
          [session_ticket.create set=module.ticket_id /]

          [module.set temp_collection.post_type='{module.collection.post_type}' /]

          [session_ticket.set_activity {module.ticket_id} app='{module.handler.app}' collection='{module.temp_collection}' module='widget-submit' /]
          [session_ticket.set {module.ticket_id} field='json_search_form_data' value='{form_data.json_encode}' /]
          [session_ticket.set {module.ticket_id} field='json_args' value='{search.args.json_encode}' /]
          [session_ticket.set {module.ticket_id} field='json_handler' value='{module.handler.json_encode}' /]
          [session_ticket.set {module.ticket_id} field='json_widget' value='{@widget.item.json_encode}' /]
          
          <article role="widget" class="col-md-6" id="[module.ticket_id/]">
              <script type="spa/axn" axn="selector.update" selector="#[module.ticket_id/]" route_ajax="t/[module.ticket_id /]" data-safe_id='[app.safe_id /]'></script>
          </article>
          [if.true @widget.even]
            <div class="gap-5"></div>
          [/if.true]
      [/loop.@widget]
      [templates.styles /] 
  </template>
  [/html.trusted]
[/templates.add]

//** Add custom css **//
[templates.add styles]
  [css.style]
    div.list-group{
        height:70%;
    }
    section[role="table-html"] {
      height: 80%;
      width:100%;
      overflow-y: auto;
    }
    a .fa{
        font-size:30px;
    }
    .period{margin-right: 5px}
    .period,.options{display:inline-block;}
    .period .form-group{margin:0 ;}
    .period .form-group .help-block{display:none;}
  [/css.style]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673958</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:35:50]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:35:50]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[dashboard]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>widget-submit</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673959</link>
		<pubDate>Sat, 17 Nov 2018 05:36:45 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670718</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

  [do.search]
  	
    [module.set args={module.json_args.json_decode} /]
    [module.args merge_with=search /]
    [module.args set=search.args /]
    
    [do.form_data]
      [module.set form_data={module.json_search_form_data.json_decode} /]
        
      [module.form_data merge_with=form_data /]
      [util.form_data_array merge_with=form_data /]
      
      //** Handle after submit to prevent earlier parsing**//  
      [arr.create merge_with=search]
      //** This do is an array do **//  
        [do]
      	  [aw2.get search.after_submit /]
       	[/do]
      [/arr.create]
      
      [do.widget]
        [module.set widget={module.json_widget.json_decode} /]
        [module.widget merge_with=widget /]
      
        [templates.run {widget.widget_type} /]
      [/do.widget]
      
    [/do.form_data]
    
  [/do.search]
    
[/templates.add]

//** table_chart is used to set header title, graph and table section wise **//
[templates.add table_chart]

  //**run widget code, set widget_data in the env and merge with global query**//
  [code.run widget.code c.exists="widget.code"/]
  
  //**setup period in query if default_period is set and form_data.select_local_period is empty**//
  [if.not_empty widget.default_period]
  	[env.set_array period_filter.new field="object_date" period="{widget.default_period}" c.empty='env.form_data.select_local_period' /]
    [env.period_filter merge_with=search.query.with.filter c.empty='env.form_data.select_local_period'/]
  [/if.not_empty]
  
  //**Check if x field_type is date, if yes, add field_format**//
  [if.equal lhs="{widget_data.query.meta.0.x.field_type}" rhs="date"]
  	[env.get form_data.select_local_period
    	m.explode_on="s::"
        o.set="template.field_format"
    /]
    
    [if.empty template.field_format]
    	[env.get widget.default_period
            m.explode_on="s::"
            o.set="template.field_format"
        /]
    [/if.empty]
    
  	[env.set widget_data.query.meta.0.x.field_format="{template.field_format.0}" /]
  [/if.equal]
  
  //**merge widget query data with search **//
  [env.widget_data.query.with merge_with=search.query.with /]
  [env.widget_data.query.meta merge_with=search.query.meta /]
    
  //**Fire the query and get back the dataset**//
  [db2.meta_query 
    query='{search.query}' 
    o.set=widget_data.result.dataset
  /]
    
  [if.user_can "develop_for_awesomeui"]
  	[env.dump widget_data.result.dataset c.ignore=true /]
  [/if.user_can]
  
  //** Chart service is used to generate pie chart for the provided data **//
  [chart_service.run {widget.chart_type} query_result={widget_data.result.dataset.rows} set=template.graph /]	

  //**Setup table data**//
  [loop.@widget_meta widget_data.query.meta.0]
  	[template.set_array args.column.new label="{@widget_meta.item.label}" meta_key="{@widget_meta.key}" /]
  [/loop.@widget_meta]
  
  //**add class to initialize datatable**//
  [template.set unique_class="{token}" /]
  [template.set args.class='{template.args.class} {template.unique_class}' /]
  
  //** UI service is used to generate table for provided data **//
  [ui.table args='{template.args}' dataset='{widget_data.result.dataset}' set=template.htmltable footer=yes/]
  
  //**logic of adding total of column**//
  [template.set row_total c.not_empty="widget.show_column_total"]
       "footerCallback": function ( row, data, start, end, display ) {
          var api = this.api(), data;

          // converting to interger to find total
          var intVal = function ( i ) {
              return typeof i === 'string' ?
                  i.replace(/[\$,]/g, '')*1 :
                  typeof i === 'number' ?
                      i : 0;
          };


          // computing column Total of the complete result 
          var colTotal = api
              .column( [env.get widget.show_column_total m.append="-1" m2.solve="yes" /] )
              .data()
              .reduce( function (a, b) {
                  return intVal(a) + intVal(b);
              }, 0 );


          // Update footer by showing the total with the reference of the column index 
          $( api.column( 0 ).footer() ).html('Total');
          $( api.column( [env.get widget.show_column_total m.append="-1" m2.solve="yes" /] ).footer() ).html(colTotal);
      },
  [/template.set]
  
  [template.set html]

    <section role="content-html">
      <div class='list-group' id=[template.id /]>	
			<div class="brand-white-bg pad-1"><h4 class="pull-left">Total : <span class="badge">[env.get widget_data.result.dataset.found_rows /]</span></h4>[templates.options id={template.id} period_filter="{widget.period_filter default=no}" /]</div>
        
       	[if.not_empty template.graph]
          <section role="table-html" style="display:none">
            [template.get htmltable /]
            
            <script type="spa/axn" axn="core.run_script" cdn_js_files="datatables/jquery.dataTables.min.js" cdn_css_files="datatables/jquery.dataTables.min.css,datatables/buttons.dataTables.min.css" data-safe_id='[app.safe_id /]'>
                $('.[template.unique_class /]').DataTable({
                	[template.row_total c.not_empty="widget.show_column_total" /]
                    "paging":false,
                    "ordering": false,
                    "info":false,
                    "searching": false,                   
                 });
              </script>
          </section>

          <section role="graph-html">
            [template.get graph /]
          </section>
        [/if.not_empty]
          
        [if.else]
           <div class="list-group-item list-group-item-action font-size-smaller">
              No Data Available
           </div>
        [/if.else]
        
      </div>
    </section>
    
    <script type=spa/axn route_ajax='t/[aw2.get qs.1 /]' bind='change' bind_selector='.form-control' ajax_selector=".form-control" data-safe_id='[app.safe_id /]'></script> 
    
  [/template.set]  
  
  <div class="row">
    <div class="col-md-12">
      [form_control.section id="{token}" html="{template.html}" title="{widget.title}"/]
    </div>
  </div>  
  
[/templates.add]


//** table_chart is used to set header title, graph and table section wise **//
[templates.add table]

  //**run widget code, set widget_data in the env and merge with global query**//
  [code.run widget.code c.exists="widget.code"/]
  
  //**setup period in query if default_period is set and form_data.select_local_period is empty**//
  [if.not_empty widget.default_period]
  	[env.set_array period_filter.new field="object_date" period="{widget.default_period}" c.empty='env.form_data.select_local_period' /]
    [env.period_filter merge_with=search.query.with.filter c.empty='env.form_data.select_local_period'/]
  [/if.not_empty]
  
  //**Check if x field_type is date, if yes, add field_format**//
  [if.equal lhs="{widget_data.query.meta.0.x.field_type}" rhs="date"]
  	[env.get form_data.select_local_period
    	m.explode_on="s::"
        o.set="template.field_format"
    /]
    
    [if.empty template.field_format]
    	[env.get widget.default_period
            m.explode_on="s::"
            o.set="template.field_format"
        /]
    [/if.empty]
    
  	[env.set widget_data.query.meta.0.x.field_format="{template.field_format.0}" /]
  [/if.equal]
  
  //**merge widget query data with search **//
  [env.widget_data.query.with merge_with=search.query.with /]
  [env.widget_data.query.meta merge_with=search.query.meta /]
    
  //**Fire the query and get back the dataset**//
  [db2.meta_query 
    query='{search.query}' 
    o.set=widget_data.result.dataset
  /]
  
  //**Setup table data**//
  [loop.@widget_meta widget_data.query.meta.0]
  	[template.set_array args.column.new label="{@widget_meta.item.label}" meta_key="{@widget_meta.key}" /]
  [/loop.@widget_meta]
  
  //** UI service is used to generate table for provided data **//
  [ui.table args='{template.args}' dataset='{widget_data.result.dataset}' set=template.htmltable /]

  [template.set html]

    <section role="content-html">
      <div class='list-group' id=[template.id /]>	
			<div class="brand-white-bg pad-1"><h4 class="pull-left">Total : <span class="badge">[env.get widget_data.result.dataset.found_rows /]</span></h4>
			
			
			[if.equal lhs="{widget.period_filter}" rhs="yes"]
				[if.not_empty env.form_data.select_local_period]
					[template.set period_value='{env.form_data.select_local_period}' /]
				[/if.not_empty]
				[if.else]
					[template.set period_value='{widget.default_period}' /]
				[/if.else]
				<div class="period pull-right">
					[form_control.select_period id='select_local_period' value="{template.period_value}" /]    	
				</div>
				<script type="spa/axn" axn="selector.update"  selector="#[aw2.get form_data.search_id /]  [role=results] #[module.ticket_id/]" bind=change bind_selector="#[module.ticket_id/] #select_local_period" route_ajax="t/[module.ticket_id /]" data-safe_id='[app.safe_id /]'></script>

			[/if.equal]
			
			
			</div>
        
       	[if.not_empty template.htmltable]
          <section role="table-html">
            [template.get htmltable /]
          </section>
        [/if.not_empty]
          
        [if.else]
           <div class="list-group-item list-group-item-action font-size-smaller">
              No Data Available
           </div>
        [/if.else]
        
      </div>
    </section>
    
    <script type=spa/axn route_ajax='t/[aw2.get qs.1 /]' bind='change' bind_selector='.form-control' ajax_selector=".form-control" data-safe_id='[app.safe_id /]'></script> 
    
  [/template.set]  
  
  <div class="row">
    <div class="col-md-12">
      [form_control.section id="{token}" html="{template.html}" title="{widget.title}"/]
    </div>
  </div>  
  
[/templates.add]


//**Widget type HTML**//
[templates.add html]
	<div class="row">
      <div class="col-md-12">
        [form_control.section id="{token}" html="{widget.html}" title="{widget.title}"/]
      </div>
    </div>
[/templates.add]

//** Nav template contains period menus **// 
[templates.add options] 
  <script type=spa/axn axn=core.run_script data-safe_id='[app.safe_id /]'>
      //**** To Show Table ****//
      $(".table").click(function(){
          var parent = $(this).parent().parent().parent();
          parent.find('section[role="table-html"]').show();
          parent.find('section[role="graph-html"]').hide();
      });

      //**** To Show Charts****//
      $(".chart").click(function(){
          var parent = $(this).parent().parent().parent(); 
          parent.find('section[role="table-html"]').hide();
          parent.find('section[role="graph-html"]').show();
      });
  </script>

  <div class="options pull-right">
    <a href="javascript:void(0)" class="table" id="[template.get id/]" ><i class="fa fa-table" aria-hidden="true"></i></a>
    <a href="javascript:void(0);" class="chart" id="[template.get id/]" ><i class="fa fa-[env.get widget.chart_type /]-chart [if.equal lhs='{widget.chart_type}' rhs='column']fa-bar-chart[/if.equal]" aria-hidden="true"></i></a>
  </div>
  [if.equal lhs="{template.period_filter}" rhs="yes"]
  	[if.not_empty env.form_data.select_local_period]
    	[template.set period_value='{env.form_data.select_local_period}' /]
  	[/if.not_empty]
    [if.else]
    	[template.set period_value='{widget.default_period}' /]
    [/if.else]
    <div class="period pull-right">
      [form_control.select_period id='select_local_period' value="{template.period_value}" /]    	
    </div>
    <script type="spa/axn" axn="selector.update"  selector="#[aw2.get form_data.search_id /]  [role=results] #[module.ticket_id/]" bind=change bind_selector="#[module.ticket_id/] #select_local_period" route_ajax="t/[module.ticket_id /]" data-safe_id='[app.safe_id /]'></script>

  [/if.equal]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673959</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:36:45]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:36:45]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[widget-submit]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>report-csv</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673960</link>
		<pubDate>Sat, 17 Nov 2018 05:37:26 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=670720</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  //**Create a new ticket and set it in the search**//
  [session_ticket.create app='{app.slug}' user='{app.user.login}' o.set="search.ticket_id" /]
  

  [template.set query={search.query} c.not_empty=search.query /]
  [template.set query={search.report_filter_query} c.not_empty=search.report_filter_query /]
  
  [if.not_empty template.query]
    [template.set query.only_query=yes /] 
    [template.set query.query_count=no /]
    [template.set query.meta='' /]
    [template.set query.pagesize=-1 /]
    [template.set query.offset=0 /]
    [template.set query.transpose="" /]
    [template.set query.transform="" /]
    
    //**Fire the reports_filter_query. Will give back the raw query and no result**//
    [db2.meta_query query="{template.query}" o.set="search.filter_query" /]
  [/if.not_empty]

[if.not_empty cookie.debug_lan_block]
	[env.search.report_data_query.run.echo /]
[/if.not_empty]    
  //**Run the reports_data_query**//
  [mysqli.multi.cud o.set="template.result"]
    [code.run env.search.report_data_query /]
  [/mysqli.multi.cud]
  
  [code.run env.search.report_fetch_query set=template.report_fetch_query /]
 
  [session_ticket.set {env.search.ticket_id} field='sql' value='{template.report_fetch_query}' /]	

  [code.run env.search.report_first_row set=template.report_first_row /]
  
  [session_ticket.set {env.search.ticket_id} field='first_row' value='{template.report_first_row}' /]	

  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
    <section role=csv>
      <a href="[env.get site_url /]/[env.app.slug /]/report_csv/[env.search.ticket_id /]" title="Download CSV">Download CSV</a></br>
      <a href="[env.get site_url /]/[env.app.slug /]/report_raw/[env.search.ticket_id /]" title="Download Raw Table" target="_blank" rel="noopener">View Raw Table</a></br>
      <a href="[env.get site_url /]/[env.app.slug /]/report_ag_grid/[env.search.ticket_id /]" title="Pivot Table" target="_blank" rel="noopener">Pivot Table</a></br>
      ticket:[env.search.ticket_id /]<br />
      user: [env.app.user.login /]<br />
      app: [env.app.slug /]<br />
      
     [if.not_empty env.search.args.workflow]
      	workflow: 
        <button 
        	class="btn btn-success" 
        	axn='route.run' 
        	bind='click' 
        	route_ajax='[env.search.args.workflow.mod_slug /].[env.search.args.workflow.row.submit_handler/]'
            data-activity_id='[env.search.args.workflow.row.ID/]'
            data-activity_table='marketing.[env.search.args.workflow.token/]'
            data-activity_data_table='marketing.[env.search.ticket_id /]'
            data-safe_id='[app.safe_id /]'
            confirmation='Are you Sure, You want to [env.search.args.workflow.row.activity_title/] Mark Done'
        ><i class="fa fa-check"></i> [env.search.args.workflow.row.activity_title/] Mark Done</button>
        
      [/if.not_empty]
      
      
  	</section>
  </template>
  [/html.trusted]
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673960</wp:post_id>
		<wp:post_date><![CDATA[2018-11-17 05:37:26]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-17 05:37:26]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[report-csv]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title>Views</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=673961</link>
		<pubDate>Mon, 19 Nov 2018 06:55:48 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://dev3.loantap.in/?post_type=search_2&#038;p=671158</guid>
		<description></description>
		<content:encoded><![CDATA[//**main handler or the module**//
[templates.add main]
    <article role="search" id="search" class="col-md-12">
      <section role=form>
        //****form starts****//
        <form id="search_form" class="search_form" data-safe_id='[app.safe_id /]'>
          [templates.render.sections/]
          [templates.render.button_block/]
        </form>
        //****form ends****//
      </section>
      <section role=results></section>
    </article>
  </div>
[/templates.add]

//***render section***//
[templates.add render.sections]
	

 
  //*****getting section params*****//
  [loop.@section module.args.sections]
  	
    //****switch case for sections***// 
    [aw2.switch]
    
     //****when filter is present in sections****//
     [aw2.case cond={env.@section.key} equal="columns"]
    	[templates.render.columns/]
     [/aw2.case]

     //****when filter is present in sections****//
     [aw2.case cond={env.@section.key} equal="filter"]
    	[templates.render.filters/]
     [/aw2.case]

     //****when search is present in sections****//
     [aw2.case cond={env.@section.key} equal="search"]
     	[templates.render.search/]
     [/aw2.case]
      
     //****when period is present in sections****//
     [aw2.case cond={env.@section.key} equal="period"]
     	[templates.render.period/]
     [/aw2.case]
    
     //****when order is present in sections****//
     [aw2.case cond={env.@section.key} equal="order"]
     	[templates.render.order/]
     [/aw2.case]
    
     //******Execute custom case*****//
     [aw2.case_else]
     	[templates.render.custom/]
     [/aw2.case_else]
    
   [/aw2.switch]
   //*****end of switch*****//
    
  [/loop.@section]
  //*****end of loop*****//
 
[/templates.add]

//****render buttons***//
[templates.add render.button_block]
[template.echo c.not_empty=cookie.dipeeka /]
	//****creating ticket for search handler, when ticket is not being passed****//
    [this_collection.new_ticket args={module.args} c.empty="module.ticket" o.set=module.ticket /]
    
    //*****script for button handler*****//
	<script type="spa/axn" axn="form.ajax" bind="submit" bind_selector="#search_form" route_ajax="t/[module.ticket]" disable_selector=".js-submit-job" data-safe_id="[app.safe_id/]"></script>
    <div class="btns">
      //*****search handler*****//
      [this_collection.handler-scripts handlers={module.args.handlers} auto_handler={module.auto_handler}/]  
    </div>
[/templates.add]

//****render columns*****//
[templates.add render.columns]
	
	//*****run the render filter fields****//
    [template.set html]
      <div class="row">
        [templates.render.select selects={@section.item.selects} c.not_empty="@section.item.selects"/]
        [env.@section.item.html.run c.empty="@section.item.selects"/]
      </div>
    [/template.set]

    //*****render the section part*****//
    [form_control.section id="columns" html={template.html} 
    title="{env.@section.item.title default='Columns'}" open="{env.@section.item.open default='yes'}"/] 
    
[/templates.add]

//****render filters*****//
[templates.add render.filters]

	
	//*****run the render filter fields****//
    [template.set html]
      <div class="row">
      	[templates.render.select selects={@section.item.selects} c.not_empty="@section.item.selects"/]
        [env.@section.item.html.run c.empty="@section.item.selects"/]
      </div>
    [/template.set]

    //*****render the section part*****//
    [form_control.section id="filters" html={template.html} 
    title="{env.@section.item.title default='Filters'}" open="{env.@section.item.open default='yes'}"/] 
    
[/templates.add]

//****render period****//
[templates.add render.period]
	//*****run the render search fields****//
    [templates.search.period params={env.@section.item} o.set=template.html/]

    //*****render the section part*****//
    [form_control.section id="period" html={template.html} 
    title="{env.@section.item.title default='Period'}" open="{env.@section.item.open default='yes'}" /] 
    
[/templates.add]

//****render order****//
[templates.add render.order]

	//*****run the render filter fields****//
    [template.set html]
      <div class="row">
        [templates.render.select selects={@section.item.selects} c.not_empty="@section.item.selects"/]
        [env.@section.item.html.run c.empty="@section.item.selects"/]
      </div>
    [/template.set]

    //*****render the section part*****//
    [form_control.section id="order" html={template.html} 
    title="{env.@section.item.title default='Order'}" open="{env.@section.item.open default='yes'}"/]
    
[/templates.add]

//****render search****//
[templates.add render.search]

	//*****run the render search fields****//
    [templates.search.fields params={env.@section.item} o.set=template.html/]

    //*****render the section part*****//
    [form_control.section id="search" html={template.html} 
    title="{env.@section.item.title default='Search'}" open="{env.@section.item.open default='yes'}"/] 
[/templates.add]

//***render custom***//
[templates.add render.custom]

	//*****run the render filter fields****//
    [template.set html]
      <div class="row">
        [env.@section.item.html.run/]
      </div>
    [/template.set]
  
    //*****render the section part*****//
    [form_control.section id="{env.@section.item.id default='custom'}" html={template.html} 
    title="{env.@section.item.title default='Custom'}" open="{env.@section.item.open default='yes'}"/] 
[/templates.add]

//*****render select*****//
[templates.add render.select]

	//****reset the @selects****//
	[env.set @selects=''/]
	
    //*****run the selects*****//
    [template.selects.run/]
    
	//**looping through the selects***//
    [loop.@select @selects]	
        <div class="col-md-4">
        	[form_control2.select id={@select.item.id} label={@select.item.label} options_array={@select.item.options} multiple={@select.item.multiple} value={@select.item.value} required={@select.item.required} taxonomy={@select.item.taxonomy} 
            term={@select.item.term}/]
        </div>
    [/loop.@select]
	
[/templates.add]

//***shows search fields***//
[templates.add search.fields desc="shows search field"]
	
    //***default values***//
    [@template.set exact={env.@section.item.exact} default="yes"/]
    [@template.set partial={env.@section.item.partial} default="yes"/]
	
    //****render search fields****//
    <div class="row">
      //****render exact search****//
      [content.run c.cond="@template.exact" c.eq="s:yes"]
        <div class="col-md-4">
          [form_control2.text id="exact" placeholder="Exact Search" label="Exact Search" required="no" /] 
        </div>
      [/content.run]
      //****render partial search****//
      [content.run c.cond="@template.partial" c.eq="s:yes"]
        <div class="col-md-4">
          [form_control2.text id="partial" placeholder="Partial Search" label="Partial Search" required="no"/] 
        </div>
      [/content.run]
      
      //****when keys are present****//
      [content.run c.not_empty="env.@section.item.keys"]
      	[loop.@key env.@section.item.keys.comma]
          <div class="col-md-4">
          	
            //*****make label from id*****//
            [php.str_replace p1='_' p2=' ' p3={@key.item} o.set=@template.label/]
            [@template.get label m.capitalize="yes" o.set=@template.label/]
            
            //***render field****//
            [form_control2.text id={@key.item} placeholder={@template.label} label={@template.label} required="no"/] 
            
          </div>
        [/loop.@key]
      [/content.run]
    </div>
          
[/templates.add]

//***shows period fields***//
[templates.add search.period desc="shows period field"]

    //***default values***//
    [@template.set select_period={env.@section.item.select_period} default="yes"/]
    [@template.set from_date={env.@section.item.from_date} default="yes"/]
    [@template.set to_date={env.@section.item.to_date} default="yes"/]
    
    //****render search fields****//
    <div class="row">
      
       //****render to_date****//
      [content.run c.not_empty="env.@section.item.filter_options"]
        <div class="col-md-12">
          [form_control2.select id="date_filter_key" placeholder="Select Filter ON Key" label="Select Filter ON Key" 
          options_array="{@section.item.filter_options}" value={@section.item.filter_default_value} required="yes"/] 
        </div>        
      [/content.run]
      
      //****render select_period****//
      [content.run c.cond="@template.select_period" c.eq="s:yes"]
        <div class="col-md-4">
          [form_control2.select_period id="select_period" placeholder="Select Period" label="Select Period" 
          value={env.@section.item.select_period_value} required="no"/] 
        </div>
      [/content.run]
      
      //****render from_date****//
      [content.run c.cond="@template.from_date" c.eq="s:yes"]
        <div class="col-md-4">
          [form_control2.date id="from_date" placeholder="From Date" label="From Date" 
          value={env.@section.item.from_date_value} required="{env.@section.item.from_date_required default='no'}"/] 
        </div>
      [/content.run]

      //****render to_date****//
      [content.run c.cond="@template.to_date" c.eq="s:yes"]
        <div class="col-md-4">
          [form_control2.date id="to_date" placeholder="To Date" label="To Date" 
          value={env.@section.item.to_date_value} required="{env.@section.item.to_date_required default='no'}"/] 
        </div>
      [/content.run]
        
    </div>
          
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>673961</wp:post_id>
		<wp:post_date><![CDATA[2018-11-19 06:55:48]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2018-11-19 06:55:48]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[views]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														</item>
					<item>
		<title>mreports-csv</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=822582</link>
		<pubDate>Wed, 26 Jun 2019 05:40:02 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://loantap.in/?post_type=search_2&#038;p=822582</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  //**Create a new ticket and set it in the search**//
  [session_ticket.create app='{app.slug}' user='{app.user.login}' o.set="search.ticket_id" /]
  [session_ticket.set_activity {search.ticket_id} service='search2.mreports-csv-submit'  /]
  [session_ticket.set {search.ticket_id} field='form_data' value='{env.form_data.json_encode}'/]
  [session_ticket.set {search.ticket_id} field='handler_service' value='{module.handler.handler_service}'/]
  [html.trusted]
  <template axn=selector.update selector='#[aw2.get form_data.search_id /]  [role=results]' get='me.html' data-safe_id='[app.safe_id /]'>
      ticket:[env.search.ticket_id /]<br />
      user: [env.app.user.login /]<br />
      app: [env.app.slug /]<br />
  </template>
  [/html.trusted]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>822582</wp:post_id>
		<wp:post_date><![CDATA[2019-06-26 05:40:02]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2019-06-26 05:40:02]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[mreports-csv]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title>mreports-csv-submit</title>
		<link>https://awxdocs.com/?post_type=search_2&#038;p=822630</link>
		<pubDate>Wed, 26 Jun 2019 05:58:22 +0000</pubDate>
		<dc:creator><![CDATA[gopi]]></dc:creator>
		<guid isPermaLink="false">https://loantap.in/?post_type=search_2&#038;p=822630</guid>
		<description></description>
		<content:encoded><![CDATA[[do.@ticket]
  [app.get ticket.data merge_with=@ticket /]
  [service.run service='{@ticket.handler_service}' /]
[/do.@ticket]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>822630</wp:post_id>
		<wp:post_date><![CDATA[2019-06-26 05:58:22]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2019-06-26 05:58:22]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[mreports-csv-submit]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[search_2]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[3]]></wp:meta_value>
		</wp:postmeta>
							</item>
				</channel>
</rss>
	